{"version":3,"sources":["webpack:///./src/views/operation-manage/components/start-log.vue?4235","webpack:///src/views/operation-manage/components/start-log.vue","webpack:///./src/views/operation-manage/components/start-log.vue?05d6","webpack:///./src/views/operation-manage/components/start-log.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","_v","style","width","base","height","attrs","model","value","callback","$$v","systemModuleName","expression","on","importDateChange","dateData","$event","changePage","columns1","data1","loadingStatus","tabHeight","totalCount","pageNo","changePageSize","staticRenderFns","data","logType","current","pageSize","created","init","queryStartLog","mounted","autoFix","methods","getDom","window","onresize","vm","forEach","val","type","date","name","api","Num","size","component"],"mappings":"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","file":"js/chunk-2d0a2e43.3acaa16c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Card',{staticStyle:{\"margin\":\"10px\"}},[_c('Row',[_c('Col',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"flex-start\"}},[_c('div',[_c('span',{staticStyle:{\"margin-left\":\"20px\",\"font-size\":\"14px\",\"font-family\":\"Microsoft YaHei\",\"font-weight\":\"400\",\"color\":\"rgba(255,255,255,1)\"}},[_vm._v(\"系统模块名称\")]),_c('Input',{style:({width:180 * _vm.base + 'px',height:'32px','border-radius':'2px','margin-left':'9px'}),attrs:{\"placeholder\":\"请输入\"},model:{value:(_vm.systemModuleName),callback:function ($$v) {_vm.systemModuleName=$$v},expression:\"systemModuleName\"}})],1),_c('div',{staticStyle:{\"margin-left\":\"30px\"}},[_c('span',{staticStyle:{\"font-size\":\"14px\",\"font-family\":\"Microsoft YaHei\",\"font-weight\":\"400\",\"color\":\"rgba(255,255,255,1)\"}},[_vm._v(\"日期\")]),_c('DatePicker',{style:({width:200 * _vm.base + 'px','margin-left':'9px'}),attrs:{\"format\":\"yyyy-MM-dd\",\"type\":\"date\",\"placeholder\":\"请选择日期\"},on:{\"on-change\":_vm.importDateChange},model:{value:(_vm.dateData),callback:function ($$v) {_vm.dateData=$$v},expression:\"dateData\"}})],1),_c('div',[_c('span',{staticStyle:{\"margin\":\"15px 30px\"}},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.changePage(1)}}},[_vm._v(\"查询\")])],1)])])],1)],1),_c('Card',{staticStyle:{\"margin\":\"10px\"}},[_c('div',{staticStyle:{\"margin-top\":\"10px\"}},[_c('Table',{attrs:{\"columns\":_vm.columns1,\"data\":_vm.data1,\"loading\":_vm.loadingStatus,\"height\":_vm.tabHeight}}),_c('Page',{staticStyle:{\"text-align\":\"right\",\"margin\":\"20px 0\"},attrs:{\"total\":_vm.totalCount,\"current\":_vm.pageNo,\"show-sizer\":\"\",\"show-elevator\":\"\",\"show-total\":\"\",\"placement\":\"top\"},on:{\"on-change\":_vm.changePage,\"on-page-size-change\":_vm.changePageSize}})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <Card style=\"margin:10px;\">\r\n      <Row>\r\n        <Col style=\"display:flex; justify-content:flex-start;\">\r\n          <div>\r\n            <span style=\"margin-left:20px;font-size:14px;font-family:Microsoft YaHei;font-weight:400;color:rgba(255,255,255,1);\">系统模块名称</span>\r\n            <Input \r\n              v-model=\"systemModuleName\"\r\n              placeholder=\"请输入\"\r\n              :style=\"{width:180 * base + 'px',height:'32px','border-radius':'2px','margin-left':'9px'}\"\r\n            ></Input>\r\n          </div>\r\n          <div style=\"margin-left:30px\">\r\n            <span style=\"font-size:14px;font-family:Microsoft YaHei;font-weight:400;color:rgba(255,255,255,1);\">日期</span>\r\n            <DatePicker \r\n              format=\"yyyy-MM-dd\" \r\n              type=\"date\" \r\n              v-model=\"dateData\" \r\n              @on-change=\"importDateChange\" \r\n              placeholder=\"请选择日期\"\r\n              :style=\"{width:200 * base + 'px','margin-left':'9px'}\" \r\n            ></DatePicker>\r\n          </div>\r\n          <div>\r\n            <span style=\"margin: 15px 30px;\">\r\n              <Button type=\"primary\" @click=\"changePage(1)\">查询</Button>\r\n            </span>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n    </Card>\r\n    <Card style=\"margin:10px;\">\r\n      <div style=\"margin-top:10px;\">\r\n        <Table :columns=\"columns1\" :data=\"data1\" :loading=\"loadingStatus\" :height=\"tabHeight\"></Table>\r\n        <Page \r\n          :total=\"totalCount\" \r\n          :current=\"pageNo\" \r\n          @on-change=\"changePage\" \r\n          @on-page-size-change=\"changePageSize\" \r\n          show-sizer \r\n          show-elevator \r\n          show-total \r\n          placement='top' \r\n          style=\"text-align:right;margin:20px 0\"\r\n        />\r\n      </div>\r\n    </Card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport api from '@/api/api';\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      columns1: [\r\n        {\r\n          title: '系统模块名称',\r\n          key: 'name'\r\n        },\r\n        {\r\n          title: '描述',\r\n          key: 'moduleDescription'\r\n        },\r\n        {\r\n          title: '启动状态',\r\n          key: 'status'\r\n        },\r\n        {\r\n          title: '创建时间',\r\n          key: 'createAt'\r\n        }\r\n      ],\r\n      data1: [],\r\n      dateData:'', // 输入的日期数据\r\n      loadingStatus:false,\r\n      logType:0, // 日志类型：0、启动日志；1为业务日志\r\n      systemModuleName:'', // 系统模块名称\r\n\r\n      // 分页\r\n      current:1,\r\n      totalCount:0,\r\n      pageNo:1,\r\n      pageSize:10,\r\n\r\n      base:1,   // 分辨率自适应 计算后的倍数\r\n      tabHeight:0,  // 分辨率自适应调整：表格的高度\r\n    }\r\n  },\r\n  created() {\r\n    this.init();\r\n    this.queryStartLog();\r\n  },\r\n  mounted() {\r\n    this.autoFix();\r\n  },\r\n  methods:{\r\n\r\n    /** 自适应 */\r\n    autoFix(){\r\n      let vm = this;\r\n      this.getDom();\r\n      window.onresize = function(){\r\n        vm.getDom();\r\n      }\r\n    },\r\n\r\n    /** 获取窗口的宽和高 */\r\n    getDom(){\r\n      let width = window.innerWidth;\r\n      let height = window.innerHeight;\r\n      this.base = (width-160)/(1024-160);\r\n      // this.tabHeight = height - 350;  // 表格页面有“过滤搜索条件”card，表格上方有Button，则采用该方式计算。\r\n      this.tabHeight = height - 325;  // 表格页面有“过滤搜索条件”card，表格上方无Button，则采用该方式计算。\r\n      // this.tabHeight = height - 275;  // 表格页面无 “过滤搜索条件”card,但表格上方有Button，则采用该方式计算。\r\n      // this.tabHeight = height - 250;   // 表格页面无 “过滤搜索条件”card,表格上方无Button，则采用该方式计算。\r\n    },\r\n\r\n    init(){\r\n      /** 渲染自定义组件 */\r\n      let vm = this;\r\n      this.columns1.forEach(item => {\r\n        if(item.key === 'status') {\r\n            item.render = (h, param) => {\r\n              return h('div', [\r\n                h(\r\n                  'span',\r\n                  {\r\n                    props: {\r\n                      type:'text',\r\n                    },\r\n                    style: {\r\n                      color:param.row.status===0?'rgba(2,232,255,1)':'rgba(245,108,108,1)',\r\n                    },\r\n                  }, param.row.status === 0?'正常':'异常'\r\n                )\r\n              ])\r\n            }\r\n        }\r\n      })\r\n    },\r\n    \r\n    importDateChange(val){\r\n      this.dateData = val;\r\n    },\r\n    \r\n    /** 查询系统启动日志 */\r\n    queryStartLog(){\r\n      let param = {\r\n        type:this.logType,\r\n        date:this.dateData,\r\n        name:this.systemModuleName,\r\n        pageNo:this.pageNo,\r\n        pageSize:this.pageSize,\r\n      }\r\n      this.loadingStatus = true;\r\n\r\n      this.data1 = [];\r\n      api.seacherDrbsSystemLogList(param).then(\r\n        res => {\r\n          // console.log(res);\r\n          this.totalCount = res.count;\r\n          res = res.result;\r\n          this.loadingStatus = false;\r\n          this.data1 = res;\r\n          if(this.data1.length === 0 && this.pageNo > 1){\r\n            this.pageNo--;\r\n            this.queryStartLog();\r\n          }\r\n        }, err => {\r\n          this.loadingStatus = false;\r\n        }\r\n      )        \r\n    },\r\n\r\n    // 改变页面\r\n    changePage(Num) {\r\n      this.pageNo = Num\r\n      this.queryStartLog();\r\n    },\r\n    \r\n    /** 改变页面条数 */\r\n    changePageSize(size) {\r\n      this.pageSize = size\r\n      if (this.pageNo === 1) {\r\n        this.queryStartLog();\r\n      }\r\n    },\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./start-log.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./start-log.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./start-log.vue?vue&type=template&id=addc83f6&\"\nimport script from \"./start-log.vue?vue&type=script&lang=js&\"\nexport * from \"./start-log.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}