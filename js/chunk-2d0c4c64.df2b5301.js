(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c4c64"],{"3bed":function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("div",{staticStyle:{width:"100%",height:"38px",background:"rgba(13,67,111,1)","box-shadow":"0px 2px 10px 0px rgba(0, 0, 0, 0.05)","font-size":"14px","font-family":"Microsoft YaHei","font-weight":"400",color:"rgba(255,255,255,1)","padding-left":"24px","line-height":"38px"}},[e._v(" 服务器信息 ")]),t("Card",{staticStyle:{margin:"10px"}},[t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("Button",{staticStyle:{background:"rgba(13,67,111,1)",color:"rgba(199,219,244,1)"},attrs:{disabled:e.isGray},on:{click:e.addServerInfo}},[e._v("录入")])],1),t("div",{staticStyle:{"margin-top":"10px"}},[t("Table",{attrs:{loading:e.loading,columns:e.columns1,data:e.serverInfoData,height:e.tabHeight}}),t("Page",{staticStyle:{"text-align":"right",margin:"20px 0"},attrs:{current:e.pageNo,total:e.pageTotal,"show-sizer":"","show-total":"","show-elevator":"",placement:"top"},on:{"on-change":e.changePage,"on-page-size-change":e.pageSizeChange}})],1)]),t("Modal",{staticStyle:{color:"rgba(254,254,254,1)"},attrs:{title:"服务器信息录入",loading:e.loading,width:"600"},model:{value:e.addServerInfoModal,callback:function(r){e.addServerInfoModal=r},expression:"addServerInfoModal"}},[t("Form",{ref:"serverInfoNew",staticStyle:{padding:"0px 50px"},attrs:{model:e.serverInfoNew,rules:e.serverInfoNewRule,"label-position":"right","label-width":120}},[t("FormItem",{attrs:{label:"服务器IP：",prop:"serverHost"}},[t("Input",{attrs:{type:"text",placeholder:"请输入服务器IP"},model:{value:e.serverInfoNew.serverHost,callback:function(r){e.$set(e.serverInfoNew,"serverHost",r)},expression:"serverInfoNew.serverHost"}})],1),t("FormItem",{attrs:{label:"服务器名称：",prop:"serverName"}},[t("Input",{attrs:{type:"text",placeholder:"请输入服务器名称"},model:{value:e.serverInfoNew.serverName,callback:function(r){e.$set(e.serverInfoNew,"serverName",r)},expression:"serverInfoNew.serverName"}})],1),t("FormItem",{attrs:{label:"端口：",prop:"port"}},[t("Input",{attrs:{type:"text",placeholder:"请输入"},model:{value:e.serverInfoNew.port,callback:function(r){e.$set(e.serverInfoNew,"port",r)},expression:"serverInfoNew.port"}})],1),t("FormItem",{attrs:{label:"用户名：",prop:"userName"}},[t("Input",{attrs:{type:"text",placeholder:"请输入"},model:{value:e.serverInfoNew.userName,callback:function(r){e.$set(e.serverInfoNew,"userName",r)},expression:"serverInfoNew.userName"}})],1),t("FormItem",{attrs:{label:"密码：",prop:"password"}},[t("Input",{attrs:{type:"password",placeholder:"请输入"},model:{value:e.serverInfoNew.password,callback:function(r){e.$set(e.serverInfoNew,"password",r)},expression:"serverInfoNew.password"}})],1),t("FormItem",{attrs:{label:"备注：",prop:"remarks"}},[t("Input",{attrs:{type:"textarea",placeholder:"请输入"},model:{value:e.serverInfoNew.remarks,callback:function(r){e.$set(e.serverInfoNew,"remarks",r)},expression:"serverInfoNew.remarks"}})],1)],1),t("p",{staticStyle:{"margin-right":"200px"},attrs:{slot:"footer"},slot:"footer"},[t("Button",{staticStyle:{background:"rgba(13,67,111,1)",color:"rgba(199,219,244,1)"},on:{click:e.cancelAddServerInfo}},[e._v("取消")]),t("Button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary"},on:{click:e.confirmAddServerInfo}},[e._v("确定")])],1)],1),t("Modal",{attrs:{loading:e.loading,title:"修改服务器信息",width:"600"},model:{value:e.updateServerInfoModal,callback:function(r){e.updateServerInfoModal=r},expression:"updateServerInfoModal"}},[t("Form",{ref:"serverInfoUpdate",staticStyle:{padding:"0px 50px"},attrs:{model:e.serverInfoUpdate,rules:e.serverInfoUpdateRule,"label-width":100}},[t("FormItem",{attrs:{label:"服务器IP：",prop:"serverHost"}},[t("Input",{attrs:{type:"text",placeholder:"请输入服务器IP"},model:{value:e.serverInfoUpdate.serverHost,callback:function(r){e.$set(e.serverInfoUpdate,"serverHost",r)},expression:"serverInfoUpdate.serverHost"}})],1),t("FormItem",{attrs:{label:"服务器名称：",prop:"serverName"}},[t("Input",{attrs:{type:"text",placeholder:"请输入服务器名称"},model:{value:e.serverInfoUpdate.serverName,callback:function(r){e.$set(e.serverInfoUpdate,"serverName",r)},expression:"serverInfoUpdate.serverName"}})],1),t("FormItem",{attrs:{label:"端口：",prop:"port"}},[t("Input",{attrs:{type:"text",placeholder:"请输入"},model:{value:e.serverInfoUpdate.port,callback:function(r){e.$set(e.serverInfoUpdate,"port",r)},expression:"serverInfoUpdate.port"}})],1),t("FormItem",{attrs:{label:"用户名：",prop:"userName"}},[t("Input",{attrs:{type:"text",placeholder:"请输入"},model:{value:e.serverInfoUpdate.userName,callback:function(r){e.$set(e.serverInfoUpdate,"userName",r)},expression:"serverInfoUpdate.userName"}})],1),t("FormItem",{attrs:{label:"密码：",prop:"password"}},[t("Input",{attrs:{type:"password",placeholder:"请输入"},model:{value:e.serverInfoUpdate.password,callback:function(r){e.$set(e.serverInfoUpdate,"password",r)},expression:"serverInfoUpdate.password"}})],1),t("FormItem",{attrs:{label:"备注：",prop:"remarks"}},[t("Input",{attrs:{type:"textarea",placeholder:"请输入"},model:{value:e.serverInfoUpdate.remarks,callback:function(r){e.$set(e.serverInfoUpdate,"remarks",r)},expression:"serverInfoUpdate.remarks"}})],1)],1),t("p",{staticStyle:{"margin-right":"200px"},attrs:{slot:"footer"},slot:"footer"},[t("Button",{staticStyle:{background:"rgba(13,67,111,1)",color:"rgba(199,219,244,1)"},on:{click:e.cancelUpdateServerInfo}},[e._v("取消")]),t("Button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary"},on:{click:function(r){return e.confirmUpdateServerInfo()}}},[e._v("确定")])],1)],1)],1)},a=[],o=(t("4160"),t("d3b7"),t("25f0"),t("159b"),t("4ec3")),n={data:function(){return{serverInfoNew:{serverHost:"",serverName:"",port:"",userName:"",password:"",remarks:""},serverInfoNewRule:{serverHost:[{required:!0,message:"服务器IP不能为空",trigger:"blur"},{pattern:/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)($|(?!\.$)\.)){4}$/,message:"服务器IP格式不正确，请重新输入！",trigger:"blur"}],serverName:[{required:!0,message:"服务器名称不能为空",trigger:"blur"}],port:[{required:!0,message:"端口号不能为空",trigger:"blur"},{pattern:/^([0-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/,message:"端口号格式不正确，请输入0~65535之间的数字",trigger:"blur"}],userName:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],remarks:[{required:!0,message:"备注信息不能为空",trigger:"blur"}]},serverInfoUpdate:{serverHost:"",serverName:"",port:"",userName:"",password:"",remarks:""},serverInfoUpdateRule:{serverHost:[{required:!0,message:"服务器IP不能为空",trigger:"blur"},{pattern:/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)($|(?!\.$)\.)){4}$/,message:"服务器IP格式不正确，请重新输入！",trigger:"blur"}],serverName:[{required:!0,message:"服务器名称不能为空",trigger:"blur"}],port:[{required:!0,message:"端口号不能为空",trigger:"blur"},{pattern:/^([0-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/,message:"端口号格式不正确，请输入0~65535之间的数字",trigger:"blur"}],userName:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],remarks:[{required:!0,message:"备注信息不能为空",trigger:"blur"}]},serverInfoData:[],addServerInfoModal:!1,updateServerInfoModal:!1,current:1,pageNo:1,pageSize:10,pageTotal:10,loading:!1,serverInfoId:"",columns1:[{title:"服务器IP",key:"serverHost"},{title:"服务器名称",key:"serverName"},{title:"备注",key:"remarks"},{title:"当前存储空间",key:"current",minWidth:170},{title:"操作",key:"handle",align:"center"}],isGray:!1,base:1,tabHeight:0}},created:function(){this.isGray=1!=JSON.parse(localStorage.getItem("loginRes")).user.operationPermissions,this.queryServerInfoList(),this.init()},mounted:function(){this.autoFix()},methods:{autoFix:function(){var e=this;this.getDom(),window.onresize=function(){e.getDom()}},getDom:function(){var e=window.innerWidth,r=window.innerHeight;this.base=(e-160)/864,this.tabHeight=r-275},init:function(){var e=this,r=this;this.columns1.forEach((function(t){"handle"===t.key&&(t.render=function(t,s){return t("p",[t("span",{props:{type:"text"},style:{marginRight:"10px",color:e.isGray?"gray":"rgba(2,232,255,1)",cursor:e.isGray?"not-allowed":"pointer"},on:{click:function(){if(r.isGray)return!1;r.updateServerInfo(s.row.id),r.queryServerInfoById()}}},"修改"),t("Poptip",{props:{confirm:!0,title:"您确定要删除这条数据吗？",transfer:!0},on:{"on-ok":function(){r.deleteServerInfoById(s.row.id)}}},[t("span",{style:{marginRight:"0",color:"rgba(2,232,255,1)",cursor:"pointer",display:e.isGray?"none":""}},"删除")]),t("span",{style:{marginRight:"0",color:"gray",cursor:"not-allowed",display:e.isGray?"":"none"}},"删除")])})}))},queryServerInfoList:function(){var e=this,r={pageNo:this.pageNo,pageSize:this.pageSize};this.loading=!0,o["a"].queryServerInfoJson(r).then((function(r){e.serverInfoData=r.result,0===r.result.length&&e.pageNo>1&&(e.pageNo--,e.queryServerInfoList()),e.pageNo=r.pageNo,e.pageSize=r.pageSize,e.pageTotal=r.count,e.loading=!1}))},addServerInfo:function(){this.$refs["serverInfoNew"].resetFields(),this.addServerInfoModal=!0},cancelAddServerInfo:function(){this.addServerInfoModal=!1},confirmAddServerInfo:function(){var e=this;this.$refs.serverInfoNew.validate((function(r){if(r){var t={serverHost:e.serverInfoNew.serverHost,serverName:e.serverInfoNew.serverName,userName:e.serverInfoNew.userName,password:e.serverInfoNew.password,port:e.serverInfoNew.port,remarks:e.serverInfoNew.remarks};e.loading=!0,o["a"].createServerInfoJson(t).then((function(r){e.$Message.success("服务器信息录入成功，后台正在校验信息，请稍候~"),e.$refs["serverInfoNew"].resetFields(),e.loading=!1,e.addServerInfoModal=!1,e.queryServerInfoList()}),(function(r){e.loading=!1,e.queryServerInfoList()}))}}))},updateServerInfo:function(e){this.updateServerInfoModal=!0,this.serverInfoId=e,this.$refs["serverInfoUpdate"].resetFields()},queryServerInfoById:function(){var e=this,r={id:this.serverInfoId};o["a"].queryServerInfoJsonById(r).then((function(r){e.loading=!1,e.serverInfoUpdate.serverHost=r.result.serverHost,e.serverInfoUpdate.serverName=r.result.serverName,e.serverInfoUpdate.userName=r.result.userName,e.serverInfoUpdate.password=r.result.password,e.serverInfoUpdate.port=r.result.port.toString(),console.log(e.serverInfoUpdate.port),e.serverInfoUpdate.remarks=r.result.remarks}),(function(r){e.loading=!1,e.$Message.error("系统异常!")}))},cancelUpdateServerInfo:function(){this.updateServerInfoModal=!1},confirmUpdateServerInfo:function(){var e=this;this.$refs.serverInfoUpdate.validate((function(r){if(r){var t={id:e.serverInfoId,serverHost:e.serverInfoUpdate.serverHost,serverName:e.serverInfoUpdate.serverName,userName:e.serverInfoUpdate.userName,password:e.serverInfoUpdate.password,port:parseInt(e.serverInfoUpdate.port),remarks:e.serverInfoUpdate.remarks};e.loading=!0,o["a"].updateServerInfoJson(t).then((function(r){e.$Message.success("服务器信息修改成功，后台正在校验信息，请稍候~"),e.$refs["serverInfoUpdate"].resetFields(),e.loading=!1,e.updateServerInfoModal=!1,e.queryServerInfoList()}),(function(r){e.loading=!1,e.queryServerInfoList()}))}}))},deleteServerInfoById:function(e){var r=this,t={id:e};o["a"].deleteServerInfoJson(t).then((function(e){r.$Message.success("服务器信息删除成功!"),r.queryServerInfoList()}))},changePage:function(e){this.pageNo=e,this.queryServerInfoList()},pageSizeChange:function(e){this.pageSize=e,1===this.pageNo&&this.queryServerInfoList()}}},i=n,l=t("2877"),d=Object(l["a"])(i,s,a,!1,null,null,null);r["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0c4c64.df2b5301.js.map