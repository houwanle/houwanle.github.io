(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2885acf8","chunk-2d0bdb16"],{1148:function(e,a,t){"use strict";var n=t("a691"),r=t("1d80");e.exports="".repeat||function(e){var a=String(r(this)),t="",l=n(e);if(l<0||l==1/0)throw RangeError("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(a+=a))1&l&&(t+=a);return t}},"176a":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticStyle:{padding:"10px"}},[t("Card",[t("p",{staticStyle:{"text-align":"right"}},[t("Button",{staticClass:"btn-right",staticStyle:{background:"rgba(13,67,111,1)",color:"rgba(199,219,244,1)"},attrs:{disabled:e.isGray},on:{click:e.newCreateChannel}},[e._v("新建通道")]),t("Button",{staticClass:"btn-right",staticStyle:{background:"rgba(13,67,111,1)",color:"rgba(199,219,244,1)"},attrs:{disabled:e.isGray},on:{click:e.allRecodePlan}},[e._v("录制计划")]),t("Button",{staticClass:"btn-right",staticStyle:{background:"rgba(13,67,111,1)",color:"rgba(199,219,244,1)"},attrs:{disabled:e.isGray},on:{click:e.startRecode}},[e._v("开启通道")]),t("Button",{staticClass:"btn-right",staticStyle:{color:"#F56C6C",border:"1px solid #F56C6C",background:"rgba(13,67,111,1)"},attrs:{disabled:e.isGray},on:{click:e.stopRecode}},[e._v("关闭通道")])],1),t("Table",{staticStyle:{marginTop:"10px"},attrs:{columns:e.columnsTab,data:e.channelTableData,height:e.tabHeight},on:{"on-selection-change":e.channelChange}}),t("Page",{staticStyle:{"text-align":"right",margin:"20px 0"},attrs:{total:e.totalCount,current:e.pageNo,"show-total":"","show-sizer":"","show-elevator":"",placement:"top"},on:{"on-change":e.pageChange,"on-page-size-change":e.sizeChange}})],1),t("Modal",{attrs:{id:"channelNew_tab",width:"640","mask-closable":!1},model:{value:e.newCreateChannelModal,callback:function(a){e.newCreateChannelModal=a},expression:"newCreateChannelModal"}},[t("p",{staticStyle:{color:"#fff","text-align":"left"},attrs:{slot:"header"},slot:"header"},[e._v(" 新建通道 ")]),t("Form",{key:e.refresh,ref:"channelNew",attrs:{model:e.channelData,"label-width":150,rules:"0"===e.channelData.enterProtocol||"1"===e.channelData.enterProtocol?e.channelRules:"2"===e.channelData.enterProtocol?e.channelRules1:e.channelRules2}},[t("FormItem",{attrs:{prop:"channelName",label:"通道名称："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",placeholder:"请输入通道名称",maxlength:60},model:{value:e.channelData.channelName,callback:function(a){e.$set(e.channelData,"channelName",a)},expression:"channelData.channelName"}}),t("span",{staticStyle:{color:"#fff","margin-left":"19px"}},[e._v(e._s(e.channelData.channelName.length)+"/60")])],1),t("FormItem",{staticStyle:{"margin-top":"-11px"},attrs:{prop:"channelType",label:"通道类型："}},[t("RadioGroup",{model:{value:e.channelData.channelType,callback:function(a){e.$set(e.channelData,"channelType",a)},expression:"channelData.channelType"}},e._l(e.channelTypeList,(function(a,n){return t("Radio",{key:n,attrs:{label:a.metaDataValue.toString()}},[t("span",{staticStyle:{color:"rgba(255,255,255,1)",fontSize:"14px"}},[e._v(e._s(a.metaDataName))])])})),1)],1),t("FormItem",{staticStyle:{"margin-top":"-15px"},attrs:{prop:"channelClass",label:"通道分类："}},[t("div",{staticStyle:{display:"flex"}},[t("RadioGroup",{staticStyle:{"max-height":"80px","max-width":"320px","overflow-y":"auto"},model:{value:e.channelData.channelClass,callback:function(a){e.$set(e.channelData,"channelClass",a)},expression:"channelData.channelClass"}},e._l(e.channelClassAll,(function(a){return t("Radio",{key:a.categoryId,attrs:{label:a.categoryId}},[t("span",{staticStyle:{color:"rgba(255,255,255,1)",fontSize:"14px"}},[e._v(e._s(a.categoryName))])])})),1),t("Button",{staticStyle:{background:"rgba(13,67,111,1)",color:"rgba(199,219,244,1)",height:"26px","margin-left":"10px"},on:{click:e.addClass}},[e._v("添加分类")])],1)]),t("FormItem",{staticStyle:{"margin-top":"-10px"},attrs:{prop:"enterProtocol",label:"输入源协议："}},[t("Select",{staticStyle:{width:"200px"},on:{"on-change":e.change1},model:{value:e.channelData.enterProtocol,callback:function(a){e.$set(e.channelData,"enterProtocol",a)},expression:"channelData.enterProtocol"}},e._l(e.enterProtocolList,(function(a){return t("Option",{key:a.metaDataValue,attrs:{value:String(a.metaDataValue)}},[e._v(e._s(a.metaDataName))])})),1)],1),"0"===e.channelData.enterProtocol||"1"===e.channelData.enterProtocol?t("div",[t("FormItem",{staticStyle:{"margin-top":"-9px"},attrs:{prop:"address",label:"源地址(主)："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",maxlength:100,placeholder:"请输入"},model:{value:e.channelData.address,callback:function(a){e.$set(e.channelData,"address",a)},expression:"channelData.address"}}),t("span",{staticStyle:{color:"#AFBCCC","margin-left":"19px"}},[e._v(e._s(e.channelData.address.length)+"/100")])],1),t("FormItem",{staticStyle:{"margin-top":"-4px"},attrs:{prop:"address1",label:"源地址(备)："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",maxlength:100,placeholder:"请输入"},model:{value:e.channelData.address1,callback:function(a){e.$set(e.channelData,"address1",a)},expression:"channelData.address1"}}),t("span",{staticStyle:{color:"#AFBCCC","margin-left":"19px"}},[e._v(e._s(e.channelData.address1.length)+"/100")])],1),t("FormItem",{staticStyle:{"margin-top":"-2px"},attrs:{prop:"timeShifting",label:"时移时长(分钟)："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"textarea",placeholder:"直播过程中可以回看时移的最长时间,不填写系统默认4个小时,即240分钟,可输入的最大值"+e.maxShiftAndBackTimeLenth},model:{value:e.channelData.timeShifting,callback:function(a){e.$set(e.channelData,"timeShifting",a)},expression:"channelData.timeShifting"}}),t("br")],1),t("FormItem",{staticStyle:{"margin-top":"-1px"},attrs:{prop:"storageTime",label:"可存储的时间(分钟)："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"textarea",placeholder:"录制的视频,后台最长可存储的时间,不填写系统默认7天,即10080分钟,可输入的最大值"+e.maxShiftAndBackTimeLenth},model:{value:e.channelData.storageTime,callback:function(a){e.$set(e.channelData,"storageTime",a)},expression:"channelData.storageTime"}}),t("br")],1),t("FormItem",{staticStyle:{"margin-top":"-2px"},attrs:{prop:"playProtocol",label:"播放协议："}},[t("Select",{staticStyle:{width:"350px"},model:{value:e.channelData.playProtocol,callback:function(a){e.$set(e.channelData,"playProtocol",a)},expression:"channelData.playProtocol"}},e._l(e.playProtocolList,(function(a,n){return t("Option",{key:n,attrs:{value:a.metaDataValue.toString()}},[e._v(e._s(a.metaDataName))])})),1)],1)],1):e._e(),"2"===e.channelData.enterProtocol?t("div",[t("FormItem",{attrs:{prop:"userName",label:"用户名："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",maxlength:100,placeholder:"请输入用户名"},model:{value:e.channelData.userName,callback:function(a){e.$set(e.channelData,"userName",a)},expression:"channelData.userName"}})],1),t("FormItem",{attrs:{prop:"passWord",label:"密码："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",maxlength:100,placeholder:"请输入用户名"},model:{value:e.channelData.passWord,callback:function(a){e.$set(e.channelData,"passWord",a)},expression:"channelData.passWord"}})],1)],1):e._e(),"3"===e.channelData.enterProtocol?t("div",[t("FormItem",{attrs:{prop:"localSip",label:"本地SIP端口："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.channelData.localSip,callback:function(a){e.$set(e.channelData,"localSip",a)},expression:"channelData.localSip"}})],1),t("FormItem",{attrs:{prop:"sipServerId",label:"SIP服务器ID："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.channelData.sipServerId,callback:function(a){e.$set(e.channelData,"sipServerId",a)},expression:"channelData.sipServerId"}})],1),t("FormItem",{attrs:{prop:"sipServerArea",label:"SIP服务器域："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.channelData.sipServerArea,callback:function(a){e.$set(e.channelData,"sipServerArea",a)},expression:"channelData.sipServerArea"}})],1),t("FormItem",{attrs:{prop:"sipServerAddress",label:"SIP服务器地址："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.channelData.sipServerAddress,callback:function(a){e.$set(e.channelData,"sipServerAddress",a)},expression:"channelData.sipServerAddress"}})],1),t("FormItem",{attrs:{prop:"sipServerPort",label:"SIP服务器端口："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.channelData.sipServerPort,callback:function(a){e.$set(e.channelData,"sipServerPort",a)},expression:"channelData.sipServerPort"}})],1),t("FormItem",{attrs:{prop:"sipUserConfirmId",label:"SIP用户认证ID："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.channelData.sipUserConfirmId,callback:function(a){e.$set(e.channelData,"sipUserConfirmId",a)},expression:"channelData.sipUserConfirmId"}})],1),t("FormItem",{attrs:{prop:"sipPassWord",label:"密码："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.channelData.sipPassWord,callback:function(a){e.$set(e.channelData,"sipPassWord",a)},expression:"channelData.sipPassWord"}})],1),t("FormItem",{attrs:{prop:"registerActiveTime",label:"注册有效期(秒)："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.channelData.registerActiveTime,callback:function(a){e.$set(e.channelData,"registerActiveTime",a)},expression:"channelData.registerActiveTime"}})],1),t("FormItem",{attrs:{prop:"heartbeatPeriod",label:"心跳周期(秒)："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.channelData.heartbeatPeriod,callback:function(a){e.$set(e.channelData,"heartbeatPeriod",a)},expression:"channelData.heartbeatPeriod"}})],1)],1):e._e(),"4"===e.channelData.enterProtocol?t("div",[t("FormItem",{attrs:{prop:"gkIsStart",label:"启用GK："}},[t("Select",{staticStyle:{width:"200px"},model:{value:e.channelData.gkIsStart,callback:function(a){e.$set(e.channelData,"gkIsStart",a)},expression:"channelData.gkIsStart"}},[t("Option",{attrs:{value:"0"}},[e._v("启用")]),t("Option",{attrs:{value:"1"}},[e._v("禁用")])],1)],1),t("FormItem",{attrs:{prop:"gkAddress",label:"GK地址："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text"},model:{value:e.channelData.gkAddress,callback:function(a){e.$set(e.channelData,"gkAddress",a)},expression:"channelData.gkAddress"}})],1),t("FormItem",{attrs:{prop:"E164",label:"E.164："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.channelData.E164,callback:function(a){e.$set(e.channelData,"E164",a)},expression:"channelData.E164"}})],1),t("FormItem",{attrs:{prop:"H3231D",label:"H.3231D："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.channelData.H3231D,callback:function(a){e.$set(e.channelData,"H3231D",a)},expression:"channelData.H3231D"}})],1),t("FormItem",{attrs:{prop:"gkUserName",label:"用户名："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.channelData.gkUserName,callback:function(a){e.$set(e.channelData,"gkUserName",a)},expression:"channelData.gkUserName"}})],1),t("FormItem",{attrs:{prop:"gkPassword",label:"密码："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.channelData.gkPassword,callback:function(a){e.$set(e.channelData,"gkPassword",a)},expression:"channelData.gkPassword"}})],1)],1):e._e(),"5"===e.channelData.enterProtocol?t("div",[t("FormItem",{attrs:{prop:"internetPort",label:"网络出口："}},[t("RadioGroup",{model:{value:e.channelData.internetPort,callback:function(a){e.$set(e.channelData,"internetPort",a)},expression:"channelData.internetPort"}},[t("Radio",{attrs:{label:"LAN"}},[t("span",[e._v("LAN")])]),t("Radio",{attrs:{label:"WAN"}},[t("span",[e._v("WAN")])])],1)],1),t("FormItem",{attrs:{prop:"transferType",label:"传输类型："}},[t("Select",{staticStyle:{width:"200px"},model:{value:e.channelData.transferType,callback:function(a){e.$set(e.channelData,"transferType",a)},expression:"channelData.transferType"}},[t("Option",{attrs:{value:"UDP"}},[e._v("UDP")])],1)],1),t("FormItem",{attrs:{prop:"registerServer",label:"注册服务器："}},[t("Select",{staticStyle:{width:"200px"},model:{value:e.channelData.registerServer,callback:function(a){e.$set(e.channelData,"registerServer",a)},expression:"channelData.registerServer"}},[t("Option",{attrs:{value:"0"}},[e._v("启用")]),t("Option",{attrs:{value:"1"}},[e._v("禁用")])],1)],1),t("FormItem",{attrs:{prop:"domainAddress",label:"域名地址："}},[t("Input",{staticStyle:{width:"300px"},attrs:{type:"text",placeholder:"请输入域名地址"},model:{value:e.channelData.domainAddress,callback:function(a){e.$set(e.channelData,"domainAddress",a)},expression:"channelData.domainAddress"}})],1),t("FormItem",{attrs:{prop:"serverAddress",label:"服务器地址："}},[t("Input",{staticStyle:{width:"300px"},attrs:{type:"text",placeholder:"请输入服务器地址"},model:{value:e.channelData.serverAddress,callback:function(a){e.$set(e.channelData,"serverAddress",a)},expression:"channelData.serverAddress"}})],1),t("FormItem",{attrs:{prop:"interUserName",label:"用户名："}},[t("Input",{staticStyle:{width:"300px"},attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.channelData.interUserName,callback:function(a){e.$set(e.channelData,"interUserName",a)},expression:"channelData.interUserName"}})],1),t("FormItem",{attrs:{prop:"interPassword",label:"密码："}},[t("Input",{staticStyle:{width:"300px"},attrs:{type:"text",placeholder:"请输入密码"},model:{value:e.channelData.interPassword,callback:function(a){e.$set(e.channelData,"interPassword",a)},expression:"channelData.interPassword"}})],1)],1):e._e()],1),t("p",{attrs:{slot:"footer"},slot:"footer"}),t("div",{staticStyle:{"text-align":"center","margin-top":"-5px"}},[t("Button",{staticStyle:{background:"rgba(13,67,111,1)",color:"rgba(199,219,244,1)","margin-right":"50px"},on:{click:e.cancelCreateChannel}},[e._v("取消")]),t("Button",{attrs:{type:"primary",loading:e.channelNewLoading},on:{click:function(a){return e.confirmCreateChannel("channelNew")}}},[e._v("确定")])],1),t("p")],1),t("Modal",{attrs:{"mask-closable":!1,width:"600",id:"channelEdit_tab"},model:{value:e.editChannelModal,callback:function(a){e.editChannelModal=a},expression:"editChannelModal"}},[t("p",{attrs:{slot:"header"},slot:"header"},[e._v(" 修改通道 ")]),t("Form",{ref:"channelEdit",attrs:{model:e.channelData,"label-width":150,rules:e.channelRules}},[t("FormItem",{attrs:{prop:"channelName",label:"通道名称："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",placeholder:"请输入通道名称",disabled:e.isGray,maxlength:60},model:{value:e.channelData.channelName,callback:function(a){e.$set(e.channelData,"channelName",a)},expression:"channelData.channelName"}}),t("span",{staticStyle:{color:"#fff"}},[e._v(e._s(e.channelData.channelName.length)+"/60")])],1),t("FormItem",{attrs:{prop:"address",label:"源地址(主)："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",maxlength:100,placeholder:"请输入地址",disabled:e.isGray},model:{value:e.channelData.address,callback:function(a){e.$set(e.channelData,"address",a)},expression:"channelData.address"}}),t("span",{staticStyle:{color:"#fff"}},[e._v(e._s(e.channelData.address.length)+"/100")])],1),t("FormItem",{attrs:{prop:"address1",label:"源地址(备)："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"text",maxlength:100,placeholder:"请输入地址",disabled:e.isGray},model:{value:e.channelData.address1,callback:function(a){e.$set(e.channelData,"address1",a)},expression:"channelData.address1"}}),t("span",{staticStyle:{color:"#fff"}},[e._v(e._s(e.channelData.address1.length)+"/100")])],1),t("FormItem",{attrs:{prop:"timeShifting",label:"时移时长(分钟)："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"textarea",placeholder:"直播过程中可以回看时移的最长时间,不填写系统默认4个小时,即240分钟,可输入的最大值"+e.maxShiftAndBackTimeLenth,disabled:e.isGray},model:{value:e.channelData.timeShifting,callback:function(a){e.$set(e.channelData,"timeShifting",a)},expression:"channelData.timeShifting"}}),t("br")],1),t("FormItem",{attrs:{prop:"storageTime",label:"可存储的时间(分钟)："}},[t("Input",{staticStyle:{width:"350px"},attrs:{type:"textarea",placeholder:"录制的视频,后台最长可存储的时间,不填写系统默认7天,即10080分钟,可输入的最大值"+e.maxShiftAndBackTimeLenth,disabled:e.isGray},model:{value:e.channelData.storageTime,callback:function(a){e.$set(e.channelData,"storageTime",a)},expression:"channelData.storageTime"}}),t("br")],1),t("FormItem",{attrs:{prop:"playProtocol",label:"播放协议："}},[t("Select",{staticStyle:{width:"350px"},attrs:{disabled:e.isGray},model:{value:e.channelData.playProtocol,callback:function(a){e.$set(e.channelData,"playProtocol",a)},expression:"channelData.playProtocol"}},e._l(e.playProtocolList,(function(a,n){return t("Option",{key:n,attrs:{value:a.metaDataValue.toString()}},[e._v(e._s(a.metaDataName))])})),1)],1)],1),t("p",{attrs:{slot:"footer"},slot:"footer"}),t("div",{staticStyle:{"text-align":"center"}},[t("Button",{staticStyle:{background:"rgba(13,67,111,1)",color:"rgba(199,219,244,1)","margin-right":"50px"},on:{click:e.cancelEditChannel}},[e._v("取消")]),t("Button",{attrs:{type:"primary",loading:e.channelEditLoading,disabled:e.isGray},on:{click:function(a){return e.confirmEditChannel("channelEdit")}}},[e._v("确定")])],1),t("p")],1),t("Modal",{attrs:{title:"录制计划",width:"640",id:"recodePlanModal"},model:{value:e.recodePlanModal,callback:function(a){e.recodePlanModal=a},expression:"recodePlanModal"}},[t("Form",{ref:"recodePlan",staticStyle:{margin:"10px 20px"}},[t("FormItem",[t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("div",[t("RadioGroup",{model:{value:e.recodePlanData.repeat,callback:function(a){e.$set(e.recodePlanData,"repeat",a)},expression:"recodePlanData.repeat"}},[t("Radio",{attrs:{label:0,disabled:e.isGray}},[t("span",{staticStyle:{color:"#fff"}},[e._v("重复")])]),t("Radio",{staticStyle:{"margin-left":"20px"},attrs:{label:1,disabled:e.isGray}},[t("span",{staticStyle:{color:"#fff"}},[e._v("不重复")])])],1)],1),t("Button",{staticStyle:{background:"rgba(13,67,111,1)",color:"rgba(199,219,244,1)"},attrs:{disabled:e.isGray},on:{click:e.add}},[e._v("新建")])],1)]),t("FormItem",{directives:[{name:"show",rawName:"v-show",value:0===e.recodePlanData.repeat,expression:"recodePlanData.repeat===0"}],staticStyle:{"margin-top":"-8px"}},[t("CheckboxGroup",{model:{value:e.recodePlanData.weekArr,callback:function(a){e.$set(e.recodePlanData,"weekArr",a)},expression:"recodePlanData.weekArr"}},[t("Checkbox",{staticStyle:{color:"#fff"},attrs:{label:1,disabled:e.isGray}},[e._v("周一")]),t("Checkbox",{staticStyle:{color:"#fff","margin-left":"20px"},attrs:{label:2,disabled:e.isGray}},[e._v("周二")]),t("Checkbox",{staticStyle:{color:"#fff","margin-left":"20px"},attrs:{label:3,disabled:e.isGray}},[e._v("周三")]),t("Checkbox",{staticStyle:{color:"#fff","margin-left":"20px"},attrs:{label:4,disabled:e.isGray}},[e._v("周四")]),t("Checkbox",{staticStyle:{color:"#fff","margin-left":"20px"},attrs:{label:5,disabled:e.isGray}},[e._v("周五")]),t("Checkbox",{staticStyle:{color:"#fff","margin-left":"20px"},attrs:{label:6,disabled:e.isGray}},[e._v("周六")]),t("Checkbox",{staticStyle:{color:"#fff","margin-left":"20px"},attrs:{label:7,disabled:e.isGray}},[e._v("周日")])],1)],1),t("FormItem",{staticStyle:{"margin-top":"-10px"}},[0===e.recodePlanData.repeat?t("div",{staticStyle:{height:"228px",width:"600px","overflow-y":"auto",border:"1px solid rgba(87,111,140,1)",paddingBottom:"20px",background:"#163C69"}},e._l(e.timeArr,(function(a,n){return t("div",{key:n,staticStyle:{marginTop:"20px",display:"flex","justify-content":"flex-start","align-items":"center",marginLeft:"20px"},on:{mouseenter:function(a){return e.moveIn(n)}}},[t("TimePicker",{staticClass:"exportInput",staticStyle:{width:"268px","margin-right":"21px"},attrs:{type:"timerange",placeholder:"开始时间 至 结束时间",disabled:e.isGray},on:{"on-change":e.recodeTimeChange},model:{value:a.timeData,callback:function(t){e.$set(a,"timeData",t)},expression:"item.timeData"}}),t("Icon",{style:{cursor:1===e.timeArr.length||e.isGray?"not-allowed":"pointer",color:"#576F8C"},attrs:{type:"ios-close-circle-outline",size:"25",disabled:1===e.timeArr.length},on:{click:function(a){return e.remove(n)}}})],1)})),0):t("div",{staticStyle:{height:"270px",width:"600px","overflow-y":"auto",border:"1px solid rgba(87,111,140,1)","padding-bottom":"20px",background:"#163C69"}},e._l(e.timeArr1,(function(a,n){return t("div",{key:n,staticStyle:{marginTop:"20px",marginLeft:"20px",display:"flex","justify-content":"flex-start","align-items":"center"},on:{mouseenter:function(a){return e.moveIn(n)}}},[t("DatePicker",{staticClass:"exportInput",staticStyle:{width:"222px"},attrs:{type:"date",placeholder:"请选择日期",disabled:e.isGray,options:e.noRepeatDateOption},on:{"on-change":e.noRepeatDateChange},model:{value:a.date,callback:function(t){e.$set(a,"date",t)},expression:"item.date"}}),t("TimePicker",{staticClass:"exportInput",staticStyle:{width:"268px","margin-left":"10px","margin-right":"20px"},attrs:{type:"timerange",placeholder:"开始时间 至 结束时间",disabled:e.isGray},on:{"on-change":e.noRepeatTimeChange},model:{value:a.timeData,callback:function(t){e.$set(a,"timeData",t)},expression:"item.timeData"}}),t("Icon",{style:{cursor:1===e.timeArr1.length||e.isGray?"not-allowed":"pointer",color:"#576F8C"},attrs:{type:"ios-close-circle-outline",size:"25",disabled:1===e.timeArr.length},on:{click:function(a){return e.remove(n)}}})],1)})),0)]),t("FormItem",[t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("div",[t("label",{staticStyle:{"vertical-align":"middle","margin-right":"10px",fontSize:"12px",color:"#fff"}},[e._v("是否开启自动录制计划:")]),t("i-switch",{attrs:{size:"small","true-color":"#02e8ff","false-color":"#3f7aa6",disabled:e.isGray},model:{value:e.recodePlanData.openPlan,callback:function(a){e.$set(e.recodePlanData,"openPlan",a)},expression:"recodePlanData.openPlan"}})],1),t("div",[t("label",{staticStyle:{"vertical-align":"middle","margin-right":"10px",fontSize:"12px",color:"#fff"}},[e._v("是否将此计划列表应用到其他通道?")]),t("i-switch",{attrs:{size:"small","true-color":"#02e8ff","false-color":"#3f7aa6",disabled:e.isGray},model:{value:e.isApply,callback:function(a){e.isApply=a},expression:"isApply"}})],1)])])],1),t("p",{attrs:{slot:"footer"},slot:"footer"}),t("div",{staticStyle:{"text-align":"center"}},[t("Button",{staticStyle:{background:"rgba(13,67,111,1)",color:"rgba(199,219,244,1)",marginRight:"50px"},on:{click:function(a){return e.cancelRecodePlan("recodePlan")}}},[e._v("取消")]),t("Button",{attrs:{type:"primary",disabled:e.isGray},on:{click:function(a){return e.confirmRecodePlan("recodePlan")}}},[e._v("确定")])],1),t("p")],1),t("Modal",{attrs:{width:"640",id:"recodePlanConfirmModal_1","class-name":"recodePlanClassName1",closable:!1,"mask-closable":!1},model:{value:e.recodePlanConfirmModal,callback:function(a){e.recodePlanConfirmModal=a},expression:"recodePlanConfirmModal"}},[t("Form",{ref:"formInline",staticStyle:{"margin-top":"52px",padding:"0 68px"}},[t("FormItem",[t("span",{staticStyle:{fontSize:"16px","font-weight":"400","font-family":"Microsoft YaHei",color:"rgba(254,254,254,1)"}},[e._v("是否继续遵循录制计划执行?")]),t("label",{staticStyle:{"margin-left":"45px"}},[t("RadioGroup",{staticStyle:{color:"#fff"},model:{value:e.isStart,callback:function(a){e.isStart=a},expression:"isStart"}},[t("Radio",{attrs:{label:1}},[e._v("是")]),t("Radio",{attrs:{label:0}},[e._v("否")])],1)],1)]),t("FormItem",{staticStyle:{marginTop:"42px"}},[t("div",{staticStyle:{color:"rgba(175,188,204,1)","font-weight":"400","font-size":"14px","font-family":"Microsoft YaHei"}},[e._v(' 当您选择"是"，打开/关闭通道后，系统后台会打开/关闭当前录制，后续从录制计划中设置的下一时间段开始按各通道录制计划执行，且会根据录制计划自动打开/关闭通道。 ')])]),t("FormItem",[t("div",{staticStyle:{color:"rgba(175,188,204,1)","font-weight":"400","font-size":"14px","font-family":"Microsoft YaHei"}},[e._v(' 当您选择"否"，录制计划失效，打开通道，系统后台将一直录制；关闭通道，系统后台将停止录制，可通过手动开启录制计划中的开关，重新激活录制计划。 ')])])],1),t("p",{staticStyle:{display:"flex","justify-content":"center","margin-top":"38px","margin-bottom":"20px"},attrs:{slot:"footer"},slot:"footer"},[t("Button",{staticStyle:{background:"rgba(13,67,111,1)",color:"rgba(199,219,244,1)"},on:{click:e.startOrStopCancel}},[e._v("取消")]),t("Button",{staticStyle:{"margin-left":"49px"},attrs:{type:"primary",disabled:e.isGray},on:{click:e.startOrStopConfirm}},[e._v("确定")])],1)],1),t("Modal",{attrs:{title:"添加分类"},model:{value:e.addClassModal,callback:function(a){e.addClassModal=a},expression:"addClassModal"}},[t("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入分类名称",maxlength:20},model:{value:e.addClassInput,callback:function(a){e.addClassInput=a},expression:"addClassInput"}}),t("span",{staticStyle:{color:"#fff"}},[e._v(e._s(e.addClassInput.length)+"/20")]),t("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:e.confirmAdd}},[e._v("确定")]),t("Button",{staticStyle:{"margin-left":"8px",background:"rgba(13,67,111,1)",color:"rgba(199,219,244,1)"},on:{click:e.confirmCancel}},[e._v("关闭")]),t("p",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},r=[],l=(t("4160"),t("caad"),t("a434"),t("d3b7"),t("ac1f"),t("25f0"),t("2532"),t("38cf"),t("1276"),t("2ca0"),t("159b"),t("b85c")),s=t("4ec3"),i={data:function(){var e=this,a=function(e,a,t){var n=/^[1-9]\d*$/;a?n.test(a)?t():t(new Error("请输入有效时移时长(正整数)")):t()},t=function(e,a,t){var n=/^[1-9]\d*$/;a?n.test(a)?t():t(new Error("请输入有效可存储时长(正整数)")):t()},n=function(e,a,t){var n=/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/;n.test(a)?t():t(new Error("请输入中文、数字、字母、下划线"))},r=function(a,t,n){var r=e.maxShiftAndBackTimeLenth;t&&r<t?n(new Error("可输入最大值是".concat(r))):n()},l=function(a,t,n){var r=e.maxShiftAndBackTimeLenth;t&&r<t?n(new Error("可输入最大值是".concat(r))):n()};return{channelNewLoading:!1,channelEditLoading:!1,refresh:0,timeArr:[{timeData:["",""]}],timeArr1:[{date:"",showDate:["",""],timeData:["",""]}],isApply:!0,channelData:{channelName:"",channelType:"0",enterProtocol:"0",address:"",address1:"",timeShifting:"",storageTime:"",playProtocol:"",channelClass:"",userName:"",passWord:"",localSip:"",sipServerId:"",sipServerArea:"",sipServerAddress:"",sipServerPort:"",sipUserConfirmId:"",sipPassWord:"",heartbeatPeriod:"",gkIsStart:"0",gkAddress:"",E164:"",H3231D:"",gkUserName:"",gkPassword:"",internetPort:"LAN",transferType:"UDP",registerServer:"0",domainAddress:"",serverAddress:"",interUserName:"",interPassword:""},channelId:"",channelRules:{channelName:[{required:!0,message:"请输入通道名称",trigger:"blur"},{validator:n,trigger:"blur"}],channelType:[{required:!0,message:"请选择通道类型",trigger:"blur"}],enterProtocol:[{required:!0,message:"请选择源协议",trigger:"change"}],address:[{required:!0,message:"请输入源地址(主)",trigger:"blur"}],address1:[{required:!0,message:"请输入源地址(备)",trigger:"blur"}],playProtocol:[{required:!0,message:"请选择播放协议",trigger:"change"}],timeShifting:[{validator:a,trigger:"blur"},{validator:r,trigger:"blur"}],storageTime:[{validator:t,trigger:"blur"},{validator:l,trigger:"blur"}]},channelRules1:{channelName:[{required:!0,message:"请输入通道名称",trigger:"blur"}],channelType:[{required:!0,message:"请选择通道类型",trigger:"blur"}],enterProtocol:[{required:!0,message:"请选择源协议",trigger:"change"}],address:[{required:!0,message:"请输入源地址",trigger:"change"}],playProtocol:[{required:!0,message:"请选择播放协议",trigger:"change"}],userName:[{required:!0,message:"请输入用户名称",trigger:"change"}],passWord:[{required:!0,message:"请输入密码",trigger:"change"}]},channelRules2:{channelName:[{required:!0,message:"请输入通道名称",trigger:"blur"}],channelType:[{required:!0,message:"请选择通道类型",trigger:"blur"}],enterProtocol:[{required:!0,message:"请选择源协议",trigger:"change"}]},channelClassAll:[],channelTypeList:[],enterProtocolList:[],playProtocolList:[],newCreateChannelModal:!1,editChannelModal:!1,addClassModal:!1,addClassInput:"",columnsTab:[{type:"selection",width:60,align:"center"},{title:"通道名称",key:"channelName",minWidth:150},{title:"类型",minWidth:120,key:"channelType1"},{title:"输入源协议",minWidth:120,key:"sourceType1"},{title:"通道ID",key:"id",minWidth:110},{title:"操作",key:"handle",width:265,align:"center",fixed:"right",render:function(a,t){return a("div",{style:{fontSize:"14px"}},[a("i-switch",{props:{size:"small",value:0===t.row.isStartRecord,disabled:e.isGray,"true-color":"#02E8FF","false-color":"#3f7aa6"},style:{marginRight:"14px"},on:{"on-change":function(a){e.recodePlanConfirmModal=!0,e.oneOrBatchRecode=0,e.isStartFlag=a,e.row=t.row}}}),a("span",{props:{type:"text"},style:{marginRight:"9px",color:"#02E8FF",cursor:"pointer",fontSize:"14px"},on:{click:function(){e.showEditChannel(t.row.channelId)}}},"修改基本信息"),a("span",{style:{marginRight:"10px",color:"#02E8FF",cursor:"pointer",fontSize:"14px"},on:{click:function(){e.searchRecordPlanList(t.row)}}},"录制计划"),a("Poptip",{props:{confirm:!0,title:"您确定要删除该通道吗?",transfer:!0,width:100,wordWrap:!0},on:{"on-ok":function(){e.isGray||e.deleteChannel(t.row.channelId)},"on-cancel":function(){}}},[a("span",{style:{cursor:"pointer",color:"#02E8FF",display:e.isGray?"none":""}},"删除")]),a("span",{style:{cursor:"not-allowed",color:"gray",display:e.isGray?"":"none"}},"删除")])}}],channelTableData:[],isStart:1,isStartFlag:!0,row:{},recodeParamData:{},recodePlanConfirmModal:!1,oneOrBatchRecode:0,recodePlanModal:!1,activeIndex:0,recodePlanData:{openPlan:!1,repeat:0,weekArr:[]},activeName:"",totalCount:0,pageNo:1,pageSize:10,selectArr:[],isGray:!1,recodeFlag:0,noRepeatDateOption:{disabledDate:function(e){return e&&e.valueOf()<Date.now()-864e5}},maxShiftAndBackTimeLenth:0,base:1,tabHeight:0}},created:function(){this.isGray=1!=JSON.parse(localStorage.getItem("loginRes")).user.operationPermissions;var e=JSON.parse(localStorage.getItem("selectAllData"));this.enterProtocolList=e[2].metaDictList,this.channelTypeList=e[6].metaDictList,this.playProtocolList=e[3].metaDictList,this.channelData.playProtocol=this.playProtocolList[0].metaDataValue.toString(),console.log("哈哈哈",e),this.searchRecordCategoryList(),this.getPublicConfig()},mounted:function(){this.autoFix()},methods:{autoFix:function(){var e=this;this.getDom(),window.onresize=function(){e.getDom()}},getDom:function(){var e=window.innerWidth,a=window.innerHeight;this.base=(e-160)/864,this.tabHeight=a-350,this.tabToParent()},tabToParent:function(){this.$emit("tabEvent",this.base)},getPublicConfig:function(){var e=this;s["a"].getPublicConfig({}).then((function(a){e.maxShiftAndBackTimeLenth=a.result.maxShiftAndBackTimeLenth}))},init:function(){var e=this;this.columnsTab.forEach((function(a){"handle"==a.key&&(a.render=function(a,t){return a("div",{style:{fontSize:"14px"}},[a("i-switch",{props:{size:"small",value:0===t.row.isStartRecord,disabled:e.isGray,"true-color":"#02E8FF","false-color":"#3f7aa6"},style:{marginRight:"14px"},on:{"on-change":function(a){e.recodePlanConfirmModal=!0,e.oneOrBatchRecode=0,e.isStartFlag=a,e.row=t.row}}}),a("span",{props:{type:"text"},style:{marginRight:"9px",color:"#02E8FF",cursor:"pointer",fontSize:"14px"},on:{click:function(){e.showEditChannel(t.row.channelId)}}},"修改基本信息"),a("span",{style:{marginRight:"10px",color:"#02E8FF",cursor:"pointer",fontSize:"14px"},on:{click:function(){e.searchRecordPlanList(t.row)}}},"录制计划"),a("Poptip",{props:{confirm:!0,title:"您确定要删除该通道吗?",transfer:!0,width:100,wordWrap:!0},on:{"on-ok":function(){e.isGray||e.deleteChannel(t.row.channelId)},"on-cancel":function(){}}},[a("span",{style:{cursor:"pointer",color:"#02E8FF",display:e.isGray?"none":""}},"删除")]),a("span",{style:{cursor:"not-allowed",color:"gray",display:e.isGray?"":"none"}},"删除")])})}))},channelChange:function(e){this.selectArr=[];var a,t=Object(l["a"])(e);try{for(t.s();!(a=t.n()).done;){var n=a.value;this.selectArr.push(n.channelId)}}catch(r){t.e(r)}finally{t.f()}},moveIn:function(e){this.activeIndex=e},recodeTimeChange:function(e){console.log("activeIndex",this.activeIndex),this.timeArr[this.activeIndex].timeData=e},noRepeatDateChange:function(e){console.log("变化",e),new Date(e).valueOf()<Date.now()-864e5?(this.$Message.info("请选择今后的日期"),this.timeArr1[this.activeIndex].date="",this.timeArr1[this.activeIndex].showDate=["",""]):(this.timeArr1[this.activeIndex].date=e,this.timeArr1[this.activeIndex].showDate=e)},noRepeatTimeChange:function(e){this.timeArr1[this.activeIndex].timeData=e},change1:function(){this.refresh++},searchRecordCategoryList:function(){var e=this,a={name:"",pageNo:-1};s["a"].searchRecordCategoryList(a).then((function(a){console.log("分类",a),e.channelClassAll=a.result}))},add:function(){0===this.recodePlanData.repeat?this.timeArr.push({timeData:["",""]}):this.timeArr1.push({date:"",showDate:"",timeData:["",""]})},remove:function(e){0===this.recodePlanData.repeat?this.isGray||1===this.timeArr.length||this.timeArr.splice(e,1):this.isGray||1===this.timeArr1.length||this.timeArr1.splice(e,1)},showChannelList:function(e){this.activeName=e,this.pageNo=1,this.pageSize=10,this.searchRecordChannelList(e)},searchRecordChannelList:function(e){var a=this,t={channelName:e,pageNo:this.pageNo,pageSize:this.pageSize};s["a"].searchRecordChannelList(t).then((function(t){if(console.log("通道列表",t),a.selectArr=[],a.channelTableData=t.result,a.totalCount=t.count,t.result&&t.result.length){var n,r=Object(l["a"])(t.result);try{for(r.s();!(n=r.n()).done;){var s=n.value;s.channelType1=0===s.channelType?"视频+音频":1===s.channelType?"纯视频":"纯音频",s.sourceType1="0"===s.sourceType?"TS/UDP":"1"===s.sourceType?"RTP":"2"===s.sourceType?"ONVIF":"3"===s.sourceType?"GB28181":"4"===s.sourceType?"H.323":"SIP"}}catch(m){r.e(m)}finally{r.f()}a.init();var i=sessionStorage.getItem("monitorState")?JSON.parse(sessionStorage.getItem("monitorState")):[];if(i){var o,c=Object(l["a"])(i);try{for(c.s();!(o=c.n()).done;){var d,h=o.value,p=Object(l["a"])(t.result);try{for(p.s();!(d=p.n()).done;){var u=d.value;h.channelId===u.channelId&&(h.business.isRecording=0===u.isStartRecord)}}catch(m){p.e(m)}finally{p.f()}}}catch(m){c.e(m)}finally{c.f()}sessionStorage.setItem("monitorState",JSON.stringify(i))}}else t.result&&!t.result.length&&a.pageNo>1&&(a.pageNo--,a.searchRecordChannelList(e))}),(function(e){a.selectArr=[]}))},newCreateChannel:function(){this.$refs["channelNew"].resetFields(),this.channelData.enterProtocol="0",this.channelData.channelClass="",console.log(this.channelClassAll),this.newCreateChannelModal=!0},confirmCreateChannel:function(e){var a=this,t=this;this.$refs[e].validate((function(e){if(e){var n={},r=a.channelData.address.startsWith("udp://"),l=a.channelData.address1.startsWith("udp://");if(!r||!l)return a.$Message.info("源地址格式不正确，请输入以“udp://”开头的源地址"),!1;console.log("id",a.channelData.channelClass),"0"===t.channelData.enterProtocol?n={userId:JSON.parse(localStorage["loginRes"]).user.userId,channelName:a.channelData.channelName,channelType:a.channelData.channelType,categoryId:a.channelData.channelClass,sourceType:a.channelData.enterProtocol,tsudpSource:a.channelData.address,tsudpBakSource:a.channelData.address1,tsudpStoreTimelength:a.channelData.storageTime,tsudpShiftTimeLength:a.channelData.timeShifting,tsudpPlayType:a.channelData.playProtocol}:"1"===a.channelData.enterProtocol&&(n={userId:JSON.parse(localStorage["loginRes"]).user.userId,channelName:a.channelData.channelName,channelType:a.channelData.channelType,categoryId:a.channelData.channelClass,sourceType:a.channelData.enterProtocol,rtpSource:a.channelData.address,rtpBakSource:a.channelData.address1,rtpStoreTimelength:a.channelData.storageTime,rtpShiftTimeLength:a.channelData.timeShifting,rtpPlayType:a.channelData.playProtocol}),a.channelNewLoading=!0,s["a"].createChannel(n).then((function(e){a.$Message.success("通道创建成功"),a.newCreateChannelModal=!1,a.channelNewLoading=!1,a.searchRecordChannelList(a.activeName)}),(function(e){a.channelNewLoading=!1}))}else a.$Message.info("请输入符合规则的内容")}))},cancelCreateChannel:function(e){this.newCreateChannelModal=!1},showEditChannel:function(e){var a=this;this.channelId=e,this.$refs["channelEdit"].resetFields(),this.editChannelModal=!0;var t={channelId:e};s["a"].selectChannelDetail(t).then((function(e){console.log(e),a.channelData.channelName=e.result.channelName,a.channelData.channelType=e.result.channelType,a.channelData.enterProtocol=e.result.sourceType,"0"===e.result.sourceType?(a.channelData.playProtocol=e.result.tsudpPlayType,a.channelData.timeShifting=e.result.tsudpShiftTimeLength,a.channelData.storageTime=e.result.tsudpStoreTimelength,a.channelData.address=e.result.tsudpSource,a.channelData.address1=e.result.tsudpBakSource?e.result.tsudpBakSource:""):"1"===e.result.sourceType&&(a.channelData.address=e.result.rtpSource,a.channelData.address1=e.result.rtpBakSource?e.result.rtpBakSource:"",a.channelData.playProtocol=e.result.rtpPlayType,a.channelData.timeShifting=e.result.rtpShiftTimeLength,a.channelData.storageTime=e.result.rtpStoreTimelength)}))},confirmEditChannel:function(e){var a=this;this.$refs[e].validate((function(e){if(e){var t={},n=a.channelData.address.startsWith("udp://"),r=a.channelData.address1.startsWith("udp://");if(!n||!r)return a.$Message.info("源地址格式不正确，请输入以“udp://”开头的源地址"),!1;"0"===a.channelData.enterProtocol?t={userId:JSON.parse(localStorage["loginRes"]).user.userId,channelId:a.channelId,channelName:a.channelData.channelName,channelType:a.channelData.channelType,tsudpSource:a.channelData.address,tsudpBakSource:a.channelData.address1,sourceType:a.channelData.enterProtocol,tsudpStoreTimelength:a.channelData.storageTime,tsudpShiftTimeLength:a.channelData.timeShifting,tsudpPlayType:a.channelData.playProtocol}:"1"===a.channelData.enterProtocol&&(t={userId:JSON.parse(localStorage["loginRes"]).user.userId,channelId:a.channelId,channelName:a.channelData.channelName,channelType:a.channelData.channelType,rtpSource:a.channelData.address,rtpBakSource:a.channelData.address1,sourceType:a.channelData.enterProtocol,rtpStoreTimelength:a.channelData.storageTime,rtpShiftTimeLength:a.channelData.timeShifting,rtpPlayType:a.channelData.playProtocol}),a.channelEditLoading=!0,s["a"].modifyChannel(t).then((function(e){a.$Message.success("通道编辑成功"),a.editChannelModal=!1,a.channelEditLoading=!1,a.searchRecordChannelList(a.activeName)}),(function(e){a.channelEditLoading=!1}))}else a.$Message.error("请输入符合规则的内容")}))},cancelEditChannel:function(){this.editChannelModal=!1},startRecode:function(){if(!this.selectArr.length)return this.$Message.info("请选择通道,再进行操作"),!1;this.recodePlanConfirmModal=!0,this.oneOrBatchRecode=1,this.isStartFlag=!0},stopRecode:function(){if(!this.selectArr.length)return this.$Message.info("请先选择通道,在进行操作"),!1;this.recodePlanConfirmModal=!0,this.oneOrBatchRecode=1,this.isStartFlag=!1},addClass:function(){this.addClassModal=!0,this.addClassInput=""},confirmAdd:function(){var e=this;if(!this.addClassInput)return this.$Message.info("请输入分类名称"),!1;var a=/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/;if(!a.test(this.addClassInput))return this.$Message.info("请输入中文、数字、字母、下划线"),!1;var t={name:this.addClassInput};s["a"].createCategory(t).then((function(a){e.searchRecordCategoryList(),e.addClassModal=!1}))},confirmCancel:function(){this.addClassModal=!1},deleteChannel:function(e){var a=this,t={channelId:e};s["a"].deleteChannel(t).then((function(e){a.$Message.success("通道删除成功"),a.searchRecordChannelList(a.activeName)}))},searchRecordPlanList:function(e){var a=this;console.log("ROW",e),console.log(e.autoRecordPlan),this.recodeFlag=0,this.recodeParamData=e,this.recodePlanData.openPlan=e.autoRecordPlan;var t={channelId:e.channelId,pageNo:-1};s["a"].searchRecordPlanList(t).then((function(t){if(t.result){var n=t.result;if(n.length)if(a.recodePlanData.repeat=n[0].type,0===a.recodePlanData.repeat){var r=n[0].weekday,s=[];for(var i in a.recodePlanData.weekArr=[],a.timeArr=[],n)n[i].weekday===r&&s.push(n[i]),a.recodePlanData.weekArr.includes(n[i].weekday)||a.recodePlanData.weekArr.push(n[i].weekday);if(s.length)for(var o in s){var c={timeData:[s[o].startDate,s[o].endDate]};a.timeArr.push(c)}a.timeArr1=[{date:"",showDate:["",""],timeData:["",""]}]}else{a.timeArr=[{timeData:["",""]}],a.recodePlanData.weekArr=[],console.log("不重复页面",n),a.timeArr1=[];var d,h=Object(l["a"])(n);try{for(h.s();!(d=h.n()).done;){var p=d.value,u={};u.date=p.startDate.split(" ")[0],u.showDate=p.startDate.split(" ")[0],u.timeData=[p.startDate.split(" ")[1],p.endDate.split(" ")[1]],a.timeArr1.push(u)}}catch(m){h.e(m)}finally{h.f()}}else a.timeArr=[{timeData:["",""]}],a.timeArr1=[{date:"",timeData:["",""],showDate:["",""]}],a.recodePlanData.repeat=0,a.recodePlanData.weekArr=[]}a.recodePlanModal=!0,a.isApply=e.applyOtherChannel}))},confirmRecodePlan:function(){var e,a=this;if(0===this.recodeFlag){var t=[];if(0===this.recodePlanData.repeat){var n=!1,r=!1;if(!this.recodePlanData.weekArr.length)return this.$Message.info("请选择周期"),!1;var i,o=Object(l["a"])(this.recodePlanData.weekArr);try{for(o.s();!(i=o.n()).done;){var c,d=i.value,h=Object(l["a"])(this.timeArr);try{for(h.s();!(c=h.n()).done;){var p=c.value;if(!p.timeData[0]||!p.timeData[1]){n=!0;break}if(p.timeData[0]===p.timeData[1]){r=!0;break}var u={type:0};u.weekday=d,u.startDate=p.timeData[0],u.endDate=p.timeData[1],t.push(u)}}catch(H){h.e(H)}finally{h.f()}}}catch(H){o.e(H)}finally{o.f()}if(n)return this.$Message.info("请选择开始时间和结束时间"),!1;if(r)return this.$Message.info("结束时间不可与开始时间相同"),!1;e={channelIdList:[this.recodeParamData.channelId],autoRecordPlan:this.recodePlanData.openPlan,applyOtherChannel:this.isApply,planList:t},console.log("重复参数",e)}else{var m,f=!1,g=!1,y=!1,D=!1,v=!1,b=Object(l["a"])(this.timeArr1);try{for(b.s();!(m=b.n()).done;){var S=m.value;if(console.log(S.date),!S.date){f=!0;break}if(!S.timeData[0]||!S.timeData[1]){g=!0;break}if(S.timeData[0]===S.timeData[1]){y=!0;break}new Date(S.date+" "+S.timeData[1]).valueOf()<(new Date).valueOf()&&(v=!0),!v&&new Date(S.date+" "+S.timeData[0]).valueOf()<(new Date).valueOf()&&(D=!0);var x={type:1};x.startDate=S.showDate+" "+S.timeData[0],x.endDate=S.showDate+" "+S.timeData[1],t.push(x)}}catch(H){b.e(H)}finally{b.f()}if(f)return this.$Message.info("请选择日期"),!1;if(g)return this.$Message.info("请选择开始时间和结束时间"),!1;if(y)return this.$Message.info("结束时间不可与开始时间相同"),!1;v&&this.$Message.info("请注意，结束时间早于当前时间的计划将不会被执行！"),D&&this.$Message.info("请注意，部分计划的开始时间早于当前时间！"),e={channelIdList:[this.recodeParamData.channelId],autoRecordPlan:this.recodePlanData.openPlan,applyOtherChannel:!!this.isApply,planList:t}}console.log("不重复参数",e),s["a"].addOrUpdatePlan(e).then((function(e){a.$Message.success("添加录制计划成功"),a.recodePlanModal=!1,a.searchRecordChannelList(a.activeName)}))}else{var P,k=[],w=Object(l["a"])(this.selectArr);try{for(w.s();!(P=w.n()).done;){var C=P.value;k.push(C)}}catch(H){w.e(H)}finally{w.f()}var I=[];if(0===this.recodePlanData.repeat){var A=!1,T=!1;if(!this.recodePlanData.weekArr.length)return this.$Message.info("请选择周期"),!1;var R,N=Object(l["a"])(this.recodePlanData.weekArr);try{for(N.s();!(R=N.n()).done;){var $,M=R.value,F=Object(l["a"])(this.timeArr);try{for(F.s();!($=F.n()).done;){var _=$.value;if(!_.timeData[0]||!_.timeData[1]){A=!0;break}if(_.timeData[0]===_.timeData[1]){T=!0;break}var L={type:0};L.weekday=M,L.startDate=_.timeData[0],L.endDate=_.timeData[1],I.push(L)}}catch(H){F.e(H)}finally{F.f()}}}catch(H){N.e(H)}finally{N.f()}if(A)return this.$Message.info("请选择开始时间和结束时间"),!1;if(T)return this.$Message.info("结束时间不可与开始时间相同"),!1;e={channelIdList:k,autoRecordPlan:this.recodePlanData.openPlan,applyOtherChannel:this.isApply,planList:I},console.log("重复参数",e)}else{var O,G=!1,B=!1,E=!1,z=!1,W=!1,U=Object(l["a"])(this.timeArr1);try{for(U.s();!(O=U.n()).done;){var j=O.value;if(console.log(j.date),!j.date){G=!0;break}if(!j.timeData[0]||!j.timeData[1]){B=!0;break}if(j.timeData[0]===j.timeData[1]){E=!0;break}new Date(j.date+" "+j.timeData[1]).valueOf()<(new Date).valueOf()&&(W=!0),!W&&new Date(j.date+" "+j.timeData[0]).valueOf()<(new Date).valueOf()&&(z=!0);var q={type:1};q.startDate=j.showDate+" "+j.timeData[0],q.endDate=j.showDate+" "+j.timeData[1],I.push(q)}}catch(H){U.e(H)}finally{U.f()}if(G)return this.$Message.info("请选择日期"),!1;if(B)return this.$Message.info("请选择开始时间和结束时间"),!1;if(E)return this.$Message.info("结束时间不可与开始时间相同"),!1;W&&this.$Message.info("请注意，结束时间早于当前时间的计划将不会被执行！"),z&&this.$Message.info("请注意，部分计划的开始时间早于当前时间！"),e={channelIdList:k,autoRecordPlan:this.recodePlanData.openPlan,applyOtherChannel:!!this.isApply,planList:I}}console.log("不重复参数",e),s["a"].addOrUpdatePlan(e).then((function(e){a.$Message.success("添加录制计划成功"),a.recodePlanModal=!1,a.searchRecordChannelList(a.activeName)}))}},allRecodePlan:function(){if(!this.selectArr.length)return this.$Message.info("请选择通道,在进行操作"),!1;this.recodeFlag=1,this.recodePlanData.repeat=0,this.timeArr=[],this.recodePlanData.weekArr=[],this.recodePlanData.openPlan=!1,this.isApply=!0,this.recodePlanModal=!0,this.timeArr=[{timeData:["",""]}],this.timeArr1=[{date:"",showDate:["",""],timeData:["",""]}]},cancelRecodePlan:function(){this.recodePlanModal=!1},startOrStopConfirm:function(){var e=this;if(this.oneOrBatchRecode)if(this.isStartFlag){var a={isStartRecord:0,autoRecordPlan:this.isStart,channelIdList:this.selectArr};s["a"].startOrStopRecord(a).then((function(a){e.$Message.success("录制已启动"),e.recodePlanConfirmModal=!1,e.searchRecordChannelList(e.activeName)}))}else{var t={isStartRecord:1,autoRecordPlan:this.isStart,channelIdList:this.selectArr};s["a"].startOrStopRecord(t).then((function(a){e.$Message.success("录制已停止"),e.recodePlanConfirmModal=!1,e.searchRecordChannelList(e.activeName)}))}else if(this.isStartFlag){var n={channelIdList:[this.row.channelId],isStartRecord:0,autoRecordPlan:this.isStart};s["a"].startOrStopRecord(n).then((function(a){e.$Message.success("录制已开启"),e.recodePlanConfirmModal=!1,e.searchRecordChannelList(e.activeName)}))}else{var r={channelIdList:[this.row.channelId],isStartRecord:1,autoRecordPlan:this.isStart};s["a"].startOrStopRecord(r).then((function(a){e.$Message.success("录制已关闭"),e.recodePlanConfirmModal=!1,e.searchRecordChannelList(e.activeName)}))}},startOrStopCancel:function(){this.recodePlanConfirmModal=!1,this.searchRecordChannelList(this.activeName)},pageChange:function(e){this.pageNo=e,this.searchRecordChannelList(this.activeName)},sizeChange:function(e){this.pageSize=e,this.searchRecordChannelList(this.activeName)}}},o=i,c=(t("7967"),t("2877")),d=Object(c["a"])(o,n,r,!1,null,null,null);a["default"]=d.exports},"2ca0":function(e,a,t){"use strict";var n=t("23e7"),r=t("06cf").f,l=t("50c4"),s=t("5a34"),i=t("1d80"),o=t("ab13"),c=t("c430"),d="".startsWith,h=Math.min,p=o("startsWith"),u=!c&&!p&&!!function(){var e=r(String.prototype,"startsWith");return e&&!e.writable}();n({target:"String",proto:!0,forced:!u&&!p},{startsWith:function(e){var a=String(i(this));s(e);var t=l(h(arguments.length>1?arguments[1]:void 0,a.length)),n=String(e);return d?d.call(a,n,t):a.slice(t,t+n.length)===n}})},"38cf":function(e,a,t){var n=t("23e7"),r=t("1148");n({target:"String",proto:!0},{repeat:r})},"71c9":function(e,a,t){},7967:function(e,a,t){"use strict";var n=t("71c9"),r=t.n(n);r.a}}]);
//# sourceMappingURL=chunk-2885acf8.79009580.js.map