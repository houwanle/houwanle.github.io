{"version":3,"sources":["webpack:///./src/views/system-manage/components/admin-create.vue?c3e3","webpack:///./src/views/system-manage/components/admin-create.vue?a1bf","webpack:///src/views/system-manage/components/admin-create.vue","webpack:///./src/views/system-manage/components/admin-create.vue?743b","webpack:///./src/views/system-manage/components/admin-create.vue?ed21"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","_v","style","height","tabHeight","attrs","ref","operatorNew","operatorNewRule","model","value","callback","$$v","$set","expression","_s","operatorNameLength","operatorPasswordLength","operatorPasswordAgainLength","on","selectedAuthority","directives","name","rawName","chooseAuthority","selectedRole","_l","item","index","key","roleId","description","chooseRole","refInFor","menuPermission","selectedItemPermissionsElement","click","checked","handleCheckChange","checkAllGroup","menuPermission1","checkAllGroup1","cancelCreateOperator","$event","confirmCreateOperator","staticRenderFns","data","Error","operatorName","operatorPassword","operatorPasswordAgain","operationPermissionArray","operationPermissionArray1","roleList","operationPermissions","operationPermissions1","roleIds","roleOnlyIds","permissionIds","permissionOnlyIds","choosedMenuIds","choosedMenuOnlyIds","notLeaf","selectedItemPermissions","selectedItemNewPermissions","base","created","queryRoleList","mounted","autoFix","methods","getDom","window","onresize","vm","width","status","api","push","roleOnlyId","console","log","selectedData","getTheWholeTree1","queryRoleInfo","queryRolePermission","role","id","getTheWholeTree","systemType","jsonData","array","jsonTree","jn","permissions","length","toString","label","children","expand","disabled","checkData1","$router","$refs","validate","valid","userName","password","handleReset","resetFields","component"],"mappings":"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","file":"js/chunk-1f4b15f0.75f6f04a.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./admin-create.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./admin-create.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"38px\",\"background\":\"rgba(13,67,111,1)\",\"box-shadow\":\"0px 2px 10px 0px rgba(0, 0, 0, 0.05)\",\"font-size\":\"14px\",\"font-family\":\"Microsoft YaHei\",\"font-weight\":\"400\",\"color\":\"rgba(255,255,255,1)\",\"padding-left\":\"24px\",\"line-height\":\"38px\"}},[_vm._v(\" 新建操作员 \")]),_c('Row',[_c('Col',[_c('Card',{staticStyle:{\"margin\":\"10px\"},style:({ height:_vm.tabHeight + 'px' })},[_c('Row',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('Col',[_c('Form',{ref:\"operatorNew\",attrs:{\"model\":_vm.operatorNew,\"rules\":_vm.operatorNewRule,\"label-position\":\"right\",\"label-width\":130}},[_c('FormItem',{attrs:{\"label\":\"名称\",\"prop\":\"operatorName\"}},[_c('Input',{staticStyle:{\"width\":\"466px\",\"height\":\"32px\"},attrs:{\"type\":\"text\",\"maxlength\":20,\"placeholder\":\"请输入\"},model:{value:(_vm.operatorNew.operatorName),callback:function ($$v) {_vm.$set(_vm.operatorNew, \"operatorName\", $$v)},expression:\"operatorNew.operatorName\"}}),_c('span',{staticStyle:{\"color\":\"rgba(175,188,204,1)\",\"margin-left\":\"10px\"}},[_vm._v(_vm._s(_vm.operatorNameLength)+\"/20\")])],1),_c('FormItem',{attrs:{\"label\":\"密码\",\"prop\":\"operatorPassword\"}},[_c('Input',{staticStyle:{\"width\":\"466px\",\"height\":\"32px\"},attrs:{\"type\":\"password\",\"maxlength\":20,\"placeholder\":\"请输入\"},model:{value:(_vm.operatorNew.operatorPassword),callback:function ($$v) {_vm.$set(_vm.operatorNew, \"operatorPassword\", $$v)},expression:\"operatorNew.operatorPassword\"}}),_c('span',{staticStyle:{\"color\":\"rgba(175,188,204,1)\",\"margin-left\":\"10px\"}},[_vm._v(_vm._s(_vm.operatorPasswordLength)+\"/20\")])],1),_c('FormItem',{attrs:{\"label\":\"确认密码\",\"prop\":\"operatorPasswordAgain\"}},[_c('Input',{staticStyle:{\"width\":\"466px\",\"height\":\"32px\"},attrs:{\"type\":\"password\",\"maxlength\":20,\"placeholder\":\"请输入\"},model:{value:(_vm.operatorNew.operatorPasswordAgain),callback:function ($$v) {_vm.$set(_vm.operatorNew, \"operatorPasswordAgain\", $$v)},expression:\"operatorNew.operatorPasswordAgain\"}}),_c('span',{staticStyle:{\"color\":\"rgba(175,188,204,1)\",\"margin-left\":\"10px\"}},[_vm._v(_vm._s(_vm.operatorPasswordAgainLength)+\"/20\")])],1),_c('RadioGroup',{staticStyle:{\"padding-left\":\"130px\",\"padding-bottom\":\"10px\"},on:{\"on-change\":_vm.selectedAuthority},model:{value:(_vm.operatorNew.chooseAuthority),callback:function ($$v) {_vm.$set(_vm.operatorNew, \"chooseAuthority\", $$v)},expression:\"operatorNew.chooseAuthority\"}},[_c('Radio',{attrs:{\"label\":\"通过角色赋权限\"}},[_c('span',{staticStyle:{\"color\":\"rgba(255,255,255,1)\"}},[_vm._v(\"通过角色赋权限\")])]),_c('Radio',{staticStyle:{\"margin-left\":\"70px\"},attrs:{\"label\":\"自定义权限\"}},[_c('span',{staticStyle:{\"color\":\"rgba(255,255,255,1)\"}},[_vm._v(\"自定义权限\")])])],1),_c('FormItem',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.operatorNew.chooseAuthority==='通过角色赋权限'),expression:\"operatorNew.chooseAuthority==='通过角色赋权限'\"}],attrs:{\"label\":\"选择角色\",\"prop\":\"chooseRole\"}},[_c('RadioGroup',{staticStyle:{\"overflow\":\"auto\"},style:({height:_vm.tabHeight-320 +'px'}),attrs:{\"vertical\":\"\"},on:{\"on-change\":_vm.selectedRole},model:{value:(_vm.operatorNew.chooseRole),callback:function ($$v) {_vm.$set(_vm.operatorNew, \"chooseRole\", $$v)},expression:\"operatorNew.chooseRole\"}},_vm._l((_vm.roleList),function(item,index){return _c('div',{key:index},[_c('Radio',{attrs:{\"label\":item.roleId}},[_c('span',{staticStyle:{\"color\":\"rgba(255,255,255,1)\"}},[_vm._v(_vm._s(item.name)+\"（\"+_vm._s(item.description)+\"）\")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.operatorNew.chooseRole===item.roleId),expression:\"operatorNew.chooseRole===item.roleId\"}]},[_c('Row',[_c('Col',{staticStyle:{\"margin-left\":\"30px\",\"display\":\"flex\",\"align-items\":\"flex-start\"}},[_c('span',{staticStyle:{\"color\":\"rgba(255,255,255,1)\"}},[_vm._v(\"可访问的功能菜单\")]),_c('div',{staticStyle:{\"width\":\"300px\",\"height\":\"240px\",\"border\":\"1px solid rgba(87,111,140,1)\",\"border-radius\":\"2px\",\"overflow\":\"auto\",\"margin-top\":\"10px\",\"margin-left\":\"10px\",\"background\":\"#163C69\"}},[_c('el-tree',{ref:\"menuPermissionTree\",refInFor:true,attrs:{\"id\":\"adminCreateTree\",\"data\":_vm.menuPermission,\"node-key\":\"id\",\"default-checked-keys\":_vm.selectedItemPermissionsElement,\"show-checkbox\":\"\",\"default-expand-all\":\"\"},on:{\"check\":function (click, checked){_vm.handleCheckChange(click, checked)}}})],1)])],1),_c('Row',[_c('Col',{staticStyle:{\"margin-left\":\"30px\",\"display\":\"flex\",\"align-items\":\"flex-start\"}},[_c('span',{staticStyle:{\"color\":\"rgba(255,255,255,1)\"}},[_vm._v(\"可操作的权限\")]),_c('div',{staticStyle:{\"margin-left\":\"10px\"}},[_c('CheckboxGroup',{staticStyle:{\"color\":\"rgba(255,255,255,1)\"},on:{\"on-change\":_vm.checkAllGroup},model:{value:(_vm.operatorNew.operationPermissionArray),callback:function ($$v) {_vm.$set(_vm.operatorNew, \"operationPermissionArray\", $$v)},expression:\"operatorNew.operationPermissionArray\"}},[_c('Checkbox',{attrs:{\"label\":\"允许查看\",\"disabled\":\"\",\"id\":\"enableWatch\"}}),_c('Checkbox',{attrs:{\"label\":\"允许操作\",\"disabled\":\"\",\"id\":\"enableOperation\"}})],1)],1)])],1)],1)],1)}),0)],1),_c('FormItem',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.operatorNew.chooseAuthority==='自定义权限'),expression:\"operatorNew.chooseAuthority==='自定义权限'\"}],attrs:{\"label\":\"可访问的功能菜单\"}},[_c('div',{staticStyle:{\"width\":\"464px\",\"height\":\"260px\",\"border\":\"1px solid #576F8C\",\"border-radius\":\"2px\",\"overflow\":\"auto\",\"margin-top\":\"10px\",\"background\":\"#163C69\"},style:({height:_vm.tabHeight-400 + 'px'})},[_c('el-tree',{attrs:{\"id\":\"adminCreateTree\",\"data\":_vm.menuPermission1,\"node-key\":\"id\",\"show-checkbox\":\"\",\"default-expand-all\":\"\"},on:{\"check\":function (click, checked){_vm.handleCheckChange(click, checked)}}})],1)]),_c('FormItem',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.operatorNew.chooseAuthority==='自定义权限'),expression:\"operatorNew.chooseAuthority==='自定义权限'\"}],attrs:{\"label\":\"可操作的权限\"}},[_c('CheckboxGroup',{staticStyle:{\"color\":\"rgba(255,255,255,1)\"},on:{\"on-change\":_vm.checkAllGroup1},model:{value:(_vm.operatorNew.operationPermissionArray1),callback:function ($$v) {_vm.$set(_vm.operatorNew, \"operationPermissionArray1\", $$v)},expression:\"operatorNew.operationPermissionArray1\"}},[_c('Checkbox',{attrs:{\"label\":\"允许查看\",\"disabled\":\"\",\"id\":\"enableWatch\"}}),_c('Checkbox',{attrs:{\"label\":\"允许操作\",\"id\":\"enableOperation\"}})],1)],1),_c('FormItem',{staticStyle:{\"margin-left\":\"120px\"}},[_c('Button',{staticStyle:{\"background\":\"rgba(13,67,111,1)\",\"color\":\"rgba(199,219,244,1)\"},on:{\"click\":_vm.cancelCreateOperator}},[_vm._v(\"取消\")]),_c('Button',{staticStyle:{\"margin-left\":\"49px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.confirmCreateOperator('operatorNew')}}},[_vm._v(\"确定\")])],1)],1)],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div\r\n      style=\"width:100%;\r\n          height:38px;\r\n          background:rgba(13,67,111,1);\r\n          box-shadow:0px 2px 10px 0px rgba(0, 0, 0, 0.05);\r\n          font-size:14px;\r\n          font-family:Microsoft YaHei;\r\n          font-weight:400;\r\n          color:rgba(255,255,255,1);\r\n          padding-left:24px;\r\n          line-height:38px;\"\r\n      >\r\n        新建操作员\r\n    </div>\r\n    <Row>\r\n      <Col>\r\n        <Card style=\"margin:10px;\" :style=\"{ height:tabHeight + 'px' }\">\r\n          <Row type=\"flex\" justify=\"center\" style=\"margin-top:20px\">\r\n            <!-- <Col span=\"19\" offset=\"2\"> -->\r\n            <Col>\r\n              <Form ref=\"operatorNew\" :model=\"operatorNew\" :rules=\"operatorNewRule\" label-position=\"right\" :label-width=\"130\">\r\n                <FormItem label=\"名称\" prop=\"operatorName\">\r\n                  <Input type=\"text\" v-model=\"operatorNew.operatorName\" :maxlength=\"20\" placeholder=\"请输入\" style=\"width:466px;height:32px;\"></Input>\r\n                  <span style=\"color:rgba(175,188,204,1);margin-left:10px;\">{{ operatorNameLength }}/20</span>\r\n                </FormItem>\r\n                <FormItem label=\"密码\" prop=\"operatorPassword\">\r\n                  <Input type=\"password\" v-model=\"operatorNew.operatorPassword\" :maxlength=\"20\" placeholder=\"请输入\" style=\"width:466px;height:32px;\"></Input>\r\n                  <span style=\"color:rgba(175,188,204,1);margin-left:10px;\">{{ operatorPasswordLength }}/20</span>\r\n                </FormItem>\r\n                <FormItem label=\"确认密码\" prop=\"operatorPasswordAgain\">\r\n                  <Input type=\"password\" v-model=\"operatorNew.operatorPasswordAgain\" :maxlength=\"20\" placeholder=\"请输入\" style=\"width:466px;height:32px;\"></Input>\r\n                  <span style=\"color:rgba(175,188,204,1);margin-left:10px;\">{{ operatorPasswordAgainLength }}/20</span>\r\n                </FormItem>\r\n                <!-- <FormItem> -->\r\n                  <RadioGroup v-model=\"operatorNew.chooseAuthority\" @on-change=\"selectedAuthority\" style=\"padding-left:130px;padding-bottom:10px;\">\r\n                    <Radio label=\"通过角色赋权限\">\r\n                      <span style=\"color:rgba(255,255,255,1)\">通过角色赋权限</span>\r\n                    </Radio>\r\n                    <Radio label=\"自定义权限\" style=\"margin-left:70px;\">\r\n                      <span style=\"color:rgba(255,255,255,1)\">自定义权限</span>\r\n                    </Radio>\r\n                  </RadioGroup>\r\n                <!-- </FormItem> -->\r\n                <!-- 通过角色赋权限 -->\r\n                <FormItem v-show=\"operatorNew.chooseAuthority==='通过角色赋权限'\" label=\"选择角色\" prop=\"chooseRole\">\r\n                  <!-- <RadioGroup  v-model=\"operatorNew.chooseRole\" @on-change=\"selectedRole\" vertical style=\"height:355px;overflow:auto;\"> -->\r\n                  <RadioGroup  v-model=\"operatorNew.chooseRole\" @on-change=\"selectedRole\" vertical :style=\"{height:tabHeight-320 +'px'}\" style=\"overflow:auto;\">\r\n                    <div v-for=\"(item, index) in roleList\" :key=\"index\">\r\n                      <Radio :label=\"item.roleId\">\r\n                        <span style=\"color:rgba(255,255,255,1)\">{{item.name}}（{{item.description}}）</span>\r\n                      </Radio>\r\n                      <div v-show=\"operatorNew.chooseRole===item.roleId\">\r\n                        <Row>\r\n                          <Col style=\"margin-left:30px;display:flex;align-items:flex-start\">\r\n                            <span style=\"color:rgba(255,255,255,1);\">可访问的功能菜单</span>\r\n                            <div \r\n                                style=\"width:300px;\r\n                                height:240px;\r\n                                border:1px solid rgba(87,111,140,1);\r\n                                border-radius:2px;\r\n                                overflow:auto;\r\n                                margin-top:10px;\r\n                                margin-left:10px;\r\n                                background: #163C69;\" >\r\n                              <el-tree\r\n                                id=\"adminCreateTree\"\r\n                                ref=\"menuPermissionTree\"\r\n                                :data=\"menuPermission\"\r\n                                node-key=\"id\"\r\n                                :default-checked-keys=\"selectedItemPermissionsElement\"\r\n                                @check=\"(click, checked)=>{handleCheckChange(click, checked)}\"\r\n                                show-checkbox\r\n                                default-expand-all>\r\n                              </el-tree>\r\n                            </div> \r\n                          </Col>\r\n                        </Row>\r\n                        <Row>\r\n                          <Col style=\"margin-left:30px;display:flex;align-items:flex-start\">\r\n                            <span style=\"color:rgba(255,255,255,1);\">可操作的权限</span>\r\n                            <div style=\"margin-left:10px;\">\r\n                              <CheckboxGroup v-model=\"operatorNew.operationPermissionArray\" @on-change=\"checkAllGroup\" style=\"color:rgba(255,255,255,1);\">\r\n                                <Checkbox label=\"允许查看\" disabled id=\"enableWatch\"></Checkbox>\r\n                                <Checkbox label=\"允许操作\" disabled id=\"enableOperation\"></Checkbox>\r\n                              </CheckboxGroup>\r\n                            </div>\r\n                          </Col>\r\n                        </Row>\r\n                      </div>\r\n                    </div> \r\n                  </RadioGroup>\r\n                </FormItem>\r\n                <!-- 自定义权限 -->\r\n                <FormItem v-show=\"operatorNew.chooseAuthority==='自定义权限'\" label=\"可访问的功能菜单\">\r\n                  <div \r\n                      style=\"width:464px;\r\n                      height:260px;\r\n                      border: 1px solid #576F8C;\r\n                      border-radius:2px;\r\n                      overflow:auto;\r\n                      margin-top:10px;                \r\n                      background: #163C69;\"\r\n                     :style=\"{height:tabHeight-400 + 'px'}\"\r\n                     >\r\n                    <el-tree\r\n                      id=\"adminCreateTree\"\r\n                      :data=\"menuPermission1\"\r\n                      node-key=\"id\"\r\n                      @check=\"(click, checked)=>{handleCheckChange(click, checked)}\"\r\n                      show-checkbox\r\n                      default-expand-all>\r\n                    </el-tree>\r\n                  </div> \r\n                </FormItem>\r\n                <!-- 自定义权限 -->\r\n                <FormItem v-show=\"operatorNew.chooseAuthority==='自定义权限'\" label=\"可操作的权限\">\r\n                  <CheckboxGroup v-model=\"operatorNew.operationPermissionArray1\" @on-change=\"checkAllGroup1\" style=\"color:rgba(255,255,255,1);\">\r\n                    <Checkbox label=\"允许查看\" disabled id=\"enableWatch\"></Checkbox>\r\n                    <Checkbox label=\"允许操作\" id=\"enableOperation\"></Checkbox>\r\n                  </CheckboxGroup>\r\n                </FormItem>\r\n                <FormItem style=\"margin-left:120px;\">\r\n                  <Button @click=\"cancelCreateOperator\" style=\"background:rgba(13,67,111,1);color:rgba(199,219,244,1);\">取消</Button>\r\n                  <Button type=\"primary\" @click=\"confirmCreateOperator('operatorNew')\" style=\"margin-left:49px;\">确定</Button>\r\n                </FormItem>\r\n              </Form>\r\n            </Col>\r\n          </Row> \r\n        </Card>\r\n      </Col>\r\n    </Row>\r\n        \r\n  </div>\r\n</template>\r\n<script>\r\nimport api from '@/api/api';\r\n\r\nexport default {\r\n  data () {\r\n    /** 新建操作员名称长度校验 */\r\n    const validateOperatorNameLength = (rule, value, callback) => {\r\n      if (!value) {\r\n        this.operatorNameLength = 0;\r\n        return callback(new Error(\"操作员名称不能为空!\"));\r\n      } else if (value.length > 20) {\r\n        this.operatorNameLength = value.length;\r\n        return callback(new Error(\"操作员名称过长,请重新输入!\"));\r\n      } else {\r\n        this.operatorNameLength = value.length;\r\n        callback();\r\n      }\r\n    };\r\n\r\n    /** 新建操作员密码长度校验 */\r\n    const validateOperatorPasswordLength = (rule, value, callback) => {\r\n      this.operatorPasswordLength = value.length;\r\n      if (value === '') {\r\n        callback(new Error(\"操作员密码不能为空!\"));\r\n      } else if (value.length > 20) {\r\n        this.operatorPasswordLength = value.length;\r\n        callback(new Error(\"操作员密码过长,请重新输入!\"));\r\n      } else {\r\n        this.operatorPasswordLength = value.length;\r\n        callback();\r\n      }\r\n    };\r\n\r\n    /** 新建操作员确认密码长度校验 */\r\n    const validateOperatorPasswordAgainLength = (rule, value, callback) => {\r\n      // this.operatorPasswordAgainLength = value.length;\r\n      if (value === '') {\r\n        callback(new Error(\"操作员确认密码不能为空!\"));\r\n      } else if (value !== this.operatorNew.operatorPassword){\r\n        callback(new Error(\"两次输入密码不一致，请重新输入!\"));\r\n      } else if (value.length > 20) {\r\n        this.operatorPasswordAgainLength = value.length;\r\n        callback(new Error(\"操作员确认密码过长,请重新输入!\"));\r\n      } else {\r\n        this.operatorPasswordAgainLength = value.length;\r\n        callback();\r\n      }\r\n    };\r\n\r\n    /** 新建操作员确认密码长度变化 */\r\n    const validateOperatorPasswordAgainLength1 = (rule, value, callback) => {\r\n      this.operatorPasswordAgainLength = value.length;\r\n      callback();\r\n    }\r\n\r\n    return {\r\n      operatorNew:{\r\n        operatorName:'', //新建操作员 名称\r\n        operatorPassword:'', // 新建操作员 密码\r\n        operatorPasswordAgain:'', // 确认密码\r\n        chooseAuthority:'通过角色赋权限',  // 选择权限\r\n        chooseRole:'', // 选择角色\r\n        operationPermissionArray:['允许查看'], // 操作权限数组\r\n        operationPermissionArray1:['允许查看'], // 操作权限数组(自定义权限)\r\n      },\r\n      operatorNewRule:{\r\n        operatorName:[\r\n          { required: true, validator: validateOperatorNameLength, trigger: 'change' },\r\n        ],\r\n        operatorPassword:[\r\n          { \r\n            required: true, \r\n            validator: validateOperatorPasswordLength, \r\n            trigger: 'change' \r\n          },\r\n          // {\r\n          //   pattern: /^([\\S+]){4,20}$/,     // 此处正则表达式已和后端保持一致   修改禅道2323bug\r\n          //   message: \"请输入长度4 - 20 位英文、 数字、 特殊字符\",\r\n          //   trigger: 'blur'\r\n          // },\r\n          {\r\n            pattern: /^(?![a-zA-z]+$)(?!\\d+$)(?![!@#$&*]+$)[a-zA-Z\\d!@#$&*]+$/,\r\n            message: '请输入长度4-20位英文、 数字、特殊字符（!，@，#，$，&，*）任意两种组合',\r\n            trigger: 'blur'\r\n          },\r\n          {\r\n            min: 4,\r\n            message: \"输入字符长度不允许小于4\",\r\n            trigger: 'blur'\r\n          },\r\n          { \r\n            max: 20, \r\n            message: \"输入字符长度不允许超出20\", \r\n            trigger: 'blur' \r\n          }\r\n        ],\r\n        operatorPasswordAgain:[\r\n          { \r\n            required: true, \r\n            validator: validateOperatorPasswordAgainLength, \r\n            trigger: 'blur' \r\n          },\r\n          { \r\n            required: true, \r\n            validator: validateOperatorPasswordAgainLength1, \r\n            trigger: 'change' \r\n          },\r\n          { \r\n            max: 20, \r\n            message: \"输入字符长度不允许超出20\", \r\n            trigger: 'blur' \r\n          },\r\n        ],\r\n      },\r\n        \r\n      roleList:[], // 角色列表 数组\r\n      operationPermissions:0, // 操作权限，默认允许查看，0：允许查看，1：允许操作 （通过角色赋权限）\r\n      operationPermissions1:0, // 操作权限，默认允许查看，0：允许查看，1：允许操作 （自定义权限）\r\n      roleIds:[], // 角色主键id 数组\r\n      roleOnlyIds:[], // 角色唯一id 数组\r\n      menuPermission:[], // 菜单权限树\r\n      menuPermission1:[], // 空菜单权限树\r\n      selectedItemPermissionsElement:[], // 默认勾选的节点的 key 的数组\r\n      permissionIds:[], // 所有菜单主键id 数组\r\n      permissionOnlyIds:[], // 所有菜单唯一id 数组\r\n      choosedMenuIds:[], // 勾选菜单的主键id\r\n      choosedMenuOnlyIds:[], // 勾选菜单的唯一id\r\n      notLeaf:[], // 非叶子节点  数组\r\n      operatorNameLength:0, // 操作员名称长度\r\n      operatorPasswordLength:0, // 操作员密码长度\r\n      operatorPasswordAgainLength:0, // 操作员确认密码长度\r\n      selectedItemPermissions:[], // 角色所拥有的菜单权限主键id\r\n      selectedItemNewPermissions:[], // 角色所拥有的菜单权限唯一id\r\n      // isCheck:false, // 用户是否勾选过菜单，默认为false:没有勾选\r\n\r\n      base:1,   // 分辨率自适应 计算后的倍数\r\n      tabHeight:0,  // 分辨率自适应调整：表格的高度\r\n\r\n    }\r\n  },\r\n  created(){\r\n    this.queryRoleList();\r\n    // this.getTheWholeTree1();\r\n    // this.isCheck = false;\r\n  },\r\n  mounted(){\r\n    this.autoFix();\r\n  },\r\n  methods:{\r\n\r\n    /** 自适应 */\r\n    autoFix(){\r\n      let vm = this;\r\n      this.getDom();\r\n      window.onresize = function(){\r\n        vm.getDom();\r\n      }\r\n    },\r\n\r\n    /** 获取窗口的宽和高 */\r\n    getDom(){\r\n      let width = window.innerWidth;\r\n      let height = window.innerHeight;\r\n      this.base = (width-160)/(1024-160);\r\n      // this.tabHeight = height - 350;  // 表格页面有“过滤搜索条件”card，表格上方有Button，则采用该方式计算。\r\n      // this.tabHeight = height - 325;  // 表格页面有“过滤搜索条件”card，表格上方无Button，则采用该方式计算。\r\n      // this.tabHeight = height - 275;  // 表格页面无 “过滤搜索条件”card,但表格上方有Button，则采用该方式计算。\r\n      this.tabHeight = height - 130;   // 表格页面无 “过滤搜索条件”card,表格上方无Button，则采用该方式计算。\r\n    },\r\n    \r\n    // /** 查询角色列表 */\r\n    // queryRoleList(){  \r\n    //   let param = {}\r\n\r\n    //   api.getRoleList(param).then(\r\n    //     res => {\r\n    //       if(res.result) {\r\n    //         this.roleList = res.result;\r\n    //       }\r\n    //     }\r\n    //   )\r\n    // },\r\n\r\n    /** 查询角色列表（不分页,v2.0版本角色数量没有限制，所以不分页查询） */\r\n    queryRoleList(){\r\n      let param = {\r\n        status:0,  // V2.0 版本 需过滤掉 临时角色（自定义权限）   0：查询 永久角色，1：查询 临时角色\r\n      }\r\n\r\n      api.roleSearchListByName(param).then(\r\n        res => {\r\n          if (res.result) {\r\n            this.roleList = res.result;\r\n          }\r\n        }\r\n      )\r\n    },\r\n\r\n    /** 选中的角色 */\r\n    selectedRole(selectedData){\r\n      let roleId;\r\n      let roleOnlyId;\r\n      this.roleIds = [];\r\n      this.roleOnlyIds = [];\r\n      for(let item of this.roleList) {\r\n        if(selectedData === item.roleId) {\r\n          this.queryRoleInfo(item);\r\n          roleId = item.id;\r\n          roleOnlyId = item.roleId;\r\n        }\r\n      }\r\n      this.roleIds.push(roleId);\r\n      this.roleOnlyIds.push(roleOnlyId);\r\n    },\r\n\r\n    /** 选中的 '赋权限方式' */\r\n    selectedAuthority(selectedData){\r\n      console.log('赋权限方式',selectedData)\r\n      this.operatorNew.chooseAuthority = selectedData;\r\n      this.getTheWholeTree1();\r\n    },\r\n\r\n    /** 新建操作员---查询角色详情 */\r\n    queryRoleInfo(role){\r\n      this.queryRolePermission(role);\r\n      this.operatorNew.operationPermissionArray = ['允许查看'];\r\n      this.operationPermissions = role.operationPermissions;\r\n      if(this.operationPermissions === 1){\r\n        this.operatorNew.operationPermissionArray = ['允许查看','允许操作'];\r\n      }\r\n    },\r\n\r\n    /** 获取角色所具有的菜单权限 */\r\n    queryRolePermission(roleInfo){\r\n      if(roleInfo){\r\n        let param = {\r\n          id:roleInfo.id,\r\n          roleId:roleInfo.roleId,\r\n        }\r\n        \r\n        // this.isCheck = false;\r\n        api.getSelectedItemPermissions(param).then(\r\n          res => {\r\n            res = res.result;\r\n            let tempId = [];\r\n            let tempNewId = []\r\n            if (res.length > 0) {\r\n              for (let i = 0; i < res.length; i++) {\r\n                tempId.push(parseInt(res[i].id))\r\n                tempNewId.push(res[i].permissionId)\r\n              }\r\n            }\r\n            this.selectedItemPermissions = tempId;\r\n            this.selectedItemNewPermissions = tempNewId;\r\n            this.getTheWholeTree(res);\r\n          }\r\n        )\r\n      } \r\n    },\r\n\r\n    /** 获取全部菜单树(有参，数据回显使用) */\r\n    getTheWholeTree(selectItem){\r\n      let param = {\r\n        systemType:'2'\r\n      }\r\n\r\n      api.searchMenuList(param).then(\r\n        res => {\r\n          res = res.result;\r\n          this.menuPermission = [];\r\n          for (var i = 0; i < res.length; i++) {\r\n            this.jsonData(res[i])\r\n          }\r\n\r\n          /* 获取已勾选的菜单权限树 element-ui使用 */\r\n          this.selectedItemPermissionsElement = [];\r\n          for (let item of selectItem) {\r\n            if (this.notLeaf.indexOf(item.id) === -1) {  // 为叶子节点，则设置成勾选\r\n              this.selectedItemPermissionsElement.push(parseInt(item.id))\r\n            }\r\n          }\r\n\r\n          this.menuPermission = res;\r\n        }\r\n      )\r\n    },\r\n\r\n    /** 获取全部菜单树(无参，查询空菜单树使用) */\r\n    getTheWholeTree1(){\r\n      let param = {\r\n        systemType:'2'\r\n      }\r\n\r\n      api.searchMenuList(param).then(\r\n        res => {\r\n          res = res.result;\r\n          this.menuPermission1 = [];\r\n          for (var i = 0; i < res.length; i++) {\r\n            this.jsonData(res[i])\r\n          }\r\n\r\n          this.menuPermission1 = res;\r\n        }\r\n      )\r\n    },\r\n\r\n    /**对后台返回数据进行处理 在json数据中添加组件能够识别出来的键值 */\r\n    jsonData(jsonTree){ \r\n      if ((typeof jsonTree === 'object') && (jsonTree.constructor === Object.prototype.constructor)) {\r\n        var array = []\r\n        array.push(jsonTree)\r\n      } else {\r\n        array = jsonTree\r\n      }\r\n      \r\n      for(let i = 0; i < array.length; i++){\r\n        let jn = array[i];\r\n        if (jn.permissions.length !== 0) {\r\n          this.notLeaf.push(jn.id.toString())\r\n        }\r\n        jn.label = jn.name // 新增title属性 保证Tree组件识别\r\n        jn.children = jn.permissions // 新增children属性 保证Tree组件识别\r\n        jn.expand = true // 新增expand属性 保证菜单展开\r\n        if (this.operatorNew.chooseAuthority === '通过角色赋权限') { // '通过角色赋权限' 需要将 '选择框' 置灰\r\n          jn.disabled = true;  \r\n        } else if (this.operatorNew.chooseAuthority === '自定义权限') { // '自定义权限'  无需将 '选择框' 置灰\r\n          jn.disabled = false;\r\n        }\r\n        if (jn.children && jn.children.length > 0) {\r\n          this.jsonData(jn.children)\r\n        } else if (jn.parentId === 0) {\r\n          jn.disabled = true\r\n        }\r\n      } \r\n    },\r\n\r\n    handleCheckChange(click, checked){\r\n      // console.log(checked.checkedKeys);\r\n      // console.log(\"全选\",checked.checkedNodes);\r\n      // console.log(checked.halfCheckedKeys);\r\n      // console.log(\"半选\",checked.halfCheckedNodes);\r\n\r\n      let fullChoosed = checked.checkedNodes; // 全选\r\n      let halfChoosed = checked.halfCheckedNodes // 半选\r\n\r\n      this.choosedMenuIds = [];\r\n      this.choosedMenuOnlyIds = [];\r\n\r\n      for(let full of fullChoosed){\r\n        this.choosedMenuIds.push(full.id);\r\n        this.choosedMenuOnlyIds.push(full.permissionId);\r\n      }\r\n      for(let half of halfChoosed){\r\n        this.choosedMenuIds.push(half.id);\r\n        this.choosedMenuOnlyIds.push(half.permissionId);\r\n      }\r\n\r\n      // this.isCheck = true;\r\n    },\r\n\r\n    /** 操作权限设置（通过角色赋权限） */\r\n    checkAllGroup(checkData){\r\n      if(checkData.length === 2){\r\n        this.operationPermissions = 1;\r\n      } else if (checkData.length === 1) {\r\n        this.operationPermissions = 0;\r\n      }\r\n    },\r\n\r\n    /** 操作权限设置（自定义权限） */\r\n    checkAllGroup1(checkData1){\r\n      if (checkData1.length === 2) {\r\n        this.operationPermissions1 = 1;\r\n      } else if (checkData1.length === 1) {\r\n        this.operationPermissions1 = 0;\r\n      }\r\n    },\r\n\r\n    cancelCreateOperator(){  // 新建操作员----取消\r\n      this.operatorNameLength = 0;\r\n      this.operatorPasswordLength = 0;\r\n      this.operatorPasswordAgainLength = 0;\r\n      this.$router.push({\r\n        name:'system-manage-admin'\r\n      })\r\n    },\r\n\r\n    /** 新建操作员----确定 */\r\n    confirmCreateOperator(name){\r\n      if (this.operatorNew.chooseAuthority === '通过角色赋权限') {\r\n        this.$refs[name].validate((valid) => {\r\n          if (valid) {\r\n            if (this.roleIds.length === 0 || this.roleOnlyIds.length === 0) {\r\n              this.$Message.info('请选择角色');\r\n              return false;\r\n            }\r\n            // 由于V2.0版本与BO合在一起，因此会出现在BO新建一个没有赋任何菜单权限的角色，而这种情况在数字录播里面是不能出现的，所以加上以下判断条件\r\n            // 即：如果所选角色没有赋任何菜单权限，则不允许新建/修改操作员\r\n            if (this.selectedItemPermissions.length === 0 || this.selectedItemNewPermissions.length === 0) {\r\n              this.$Message.info('请选择菜单');\r\n              return false;\r\n            }\r\n  \r\n            let param = {\r\n              userName:this.operatorNew.operatorName,\r\n              // password:this.operatorNew.operatorPassword,\r\n              password:btoa(encodeURI(this.operatorNew.operatorPassword)),  // 新建操作员 密码转化为base64\r\n              operationPermissions:this.operationPermissions,\r\n              roleIds:this.roleIds,\r\n              roleOnlyIds:this.roleOnlyIds,\r\n              permissionIds:this.selectedItemPermissions,\r\n              permissionOnlyIds:this.selectedItemNewPermissions,\r\n            }\r\n  \r\n            api.createOperatorJson(param).then(\r\n              res => {\r\n                this.$Message.success('新建操作员成功!');\r\n                this.roleIds = [];\r\n                this.roleOnlyIds = [];\r\n                this.permissionIds = [];\r\n                this.permissionOnlyIds = [];\r\n                this.operationPermissions = 0;\r\n                this.operatorNameLength = 0;\r\n                this.operatorPasswordLength = 0;\r\n                this.operatorPasswordAgainLength = 0;\r\n                this.$router.push({\r\n                  name:'system-manage-admin'\r\n                })\r\n              },\r\n              err => {\r\n                this.operatorNameLength = 0;\r\n                this.operatorPasswordLength = 0;\r\n                this.operatorPasswordAgainLength = 0;\r\n              }\r\n            )\r\n          }\r\n        })\r\n      } else if (this.operatorNew.chooseAuthority === '自定义权限') {\r\n        this.$refs[name].validate((valid) => {\r\n          if (valid) {\r\n            if (this.choosedMenuIds && this.choosedMenuIds.length === 0) {\r\n              this.$Message.info('请选择菜单');\r\n              return false;\r\n            }\r\n\r\n            let param = {  // V2.0版本：自定义权限（临时角色）不用给后台接口传 角色id和角色唯一id\r\n              userName:this.operatorNew.operatorName,\r\n              // password:this.operatorNew.operatorPassword,\r\n              password:btoa(encodeURI(this.operatorNew.operatorPassword)),  // 新建操作员 密码转化为base64\r\n              operationPermissions:this.operationPermissions1,\r\n              permissionIds:this.choosedMenuIds,\r\n              permissionOnlyIds:this.choosedMenuOnlyIds,\r\n            }\r\n\r\n            api.createOperatorJson(param).then(\r\n              res => {\r\n                this.$Message.success('新建操作员成功!');\r\n                this.operationPermissions1 = 0;\r\n                this.operatorNameLength = 0;\r\n                this.operatorPasswordLength = 0;\r\n                this.operatorPasswordAgainLength = 0;\r\n                this.$router.push({\r\n                  name:'system-manage-admin'\r\n                })\r\n              },\r\n              err => {\r\n                this.operatorNameLength = 0;\r\n                this.operatorPasswordLength = 0;\r\n                this.operatorPasswordAgainLength = 0;\r\n              }\r\n            )\r\n          }\r\n        })\r\n      }\r\n\r\n    },\r\n\r\n\r\n      /** V1.0版本可修改菜单权限和操作权限 使用的代码（V2.0版本新需求，需大改，此处代码先注掉） */\r\n      // this.$refs[name].validate((valid) => {\r\n      //   if (valid) {\r\n      //     if (this.roleIds.length === 0 || this.roleOnlyIds.length === 0) {\r\n      //       this.$Message.error('请选择角色');\r\n      //     } else if (this.selectedItemPermissionsElement.length == 0) {\r\n      //       if (this.isCheck == false && this.choosedMenuIds.length == 0) {\r\n      //         this.$Message.error('请选择菜单');\r\n      //       } else {\r\n      //         if (this.isCheck == true && this.choosedMenuIds.length == 0) {\r\n      //           this.$Message.error('请选择菜单');\r\n      //         } else {\r\n      //           let param = {\r\n      //             userName:this.operatorNew.operatorName,\r\n      //             password:this.operatorNew.operatorPassword,\r\n      //             operationPermissions:this.operationPermissions,\r\n      //             roleIds:this.roleIds,\r\n      //             roleOnlyIds:this.roleOnlyIds,\r\n      //             permissionIds:this.choosedMenuIds,\r\n      //             permissionOnlyIds:this.choosedMenuOnlyIds,\r\n      //           }\r\n\r\n      //           api.createOperatorJson(param).then(\r\n      //             res =>{\r\n      //               this.$Message.success('新建操作员成功!');\r\n      //               this.roleIds = [];\r\n      //               this.roleOnlyIds = [];\r\n      //               this.permissionIds = [];\r\n      //               this.permissionOnlyIds = [];\r\n      //               this.operationPermissions = 0;\r\n      //               this.operatorNameLength = 0;\r\n      //               this.operatorPasswordLength = 0;\r\n      //               this.operatorPasswordAgainLength = 0;\r\n      //               this.$router.push({\r\n      //                 name:'system-manage-admin'\r\n      //               })\r\n      //             },\r\n      //             err => {\r\n      //               this.operatorNameLength = 0;\r\n      //               this.operatorPasswordLength = 0;\r\n      //               this.operatorPasswordAgainLength = 0;\r\n      //             }\r\n      //           )\r\n      //         }\r\n      //       }\r\n      //     } else {\r\n      //       if (this.isCheck == true && this.choosedMenuIds.length == 0) {\r\n      //         this.$Message.error('请选择菜单');\r\n      //       } else if (this.isCheck == true && this.choosedMenuIds.length != 0) {\r\n      //         let param = {\r\n      //           userName:this.operatorNew.operatorName,\r\n      //           password:this.operatorNew.operatorPassword,\r\n      //           operationPermissions:this.operationPermissions,\r\n      //           roleIds:this.roleIds,\r\n      //           roleOnlyIds:this.roleOnlyIds,\r\n      //           permissionIds:this.choosedMenuIds,\r\n      //           permissionOnlyIds:this.choosedMenuOnlyIds,\r\n      //         }\r\n\r\n      //         api.createOperatorJson(param).then(\r\n      //           res =>{\r\n      //             this.$Message.success('新建操作员成功!');\r\n      //             this.roleIds = [];\r\n      //             this.roleOnlyIds = [];\r\n      //             this.permissionIds = [];\r\n      //             this.permissionOnlyIds = [];\r\n      //             this.operationPermissions = 0;\r\n      //             this.operatorNameLength = 0;\r\n      //             this.operatorPasswordLength = 0;\r\n      //             this.operatorPasswordAgainLength = 0;\r\n      //             this.$router.push({\r\n      //               name:'system-manage-admin'\r\n      //             })\r\n      //           },\r\n      //           err => {\r\n      //             this.operatorNameLength = 0;\r\n      //             this.operatorPasswordLength = 0;\r\n      //             this.operatorPasswordAgainLength = 0;\r\n      //           }\r\n      //         )\r\n      //       } else {\r\n      //         let param = {\r\n      //           userName:this.operatorNew.operatorName,\r\n      //           password:this.operatorNew.operatorPassword,\r\n      //           operationPermissions:this.operationPermissions,\r\n      //           roleIds:this.roleIds,\r\n      //           roleOnlyIds:this.roleOnlyIds,\r\n      //           permissionIds:this.selectedItemPermissions,\r\n      //           permissionOnlyIds:this.selectedItemNewPermissions,\r\n      //         }\r\n\r\n      //         api.createOperatorJson(param).then(\r\n      //           res =>{\r\n      //             this.$Message.success('新建操作员成功!');\r\n      //             this.roleIds = [];\r\n      //             this.roleOnlyIds = [];\r\n      //             this.permissionIds = [];\r\n      //             this.permissionOnlyIds = [];\r\n      //             this.operationPermissions = 0;\r\n      //             this.operatorNameLength = 0;\r\n      //             this.operatorPasswordLength = 0;\r\n      //             this.operatorPasswordAgainLength = 0;\r\n      //             this.$router.push({\r\n      //               name:'system-manage-admin'\r\n      //             })\r\n      //           },\r\n      //           err => {\r\n      //             this.operatorNameLength = 0;\r\n      //             this.operatorPasswordLength = 0;\r\n      //             this.operatorPasswordAgainLength = 0;\r\n      //           }\r\n      //         )\r\n      //       }\r\n            \r\n      //     }\r\n      //   } \r\n        \r\n      // })\r\n    \r\n\r\n    // 重置表单\r\n    handleReset (name) {\r\n      this.$refs[name].resetFields()\r\n    },\r\n\r\n  }\r\n}\r\n</script>\r\n<style>\r\n#adminCreateTree .el-tree-node__content {\r\n  margin-top:10px;\r\n}\r\n\r\n#enableWatch {\r\n  margin-left: 32px;\r\n}\r\n#enableOperation {\r\n  margin-left: 46px;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./admin-create.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./admin-create.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./admin-create.vue?vue&type=template&id=3a337853&\"\nimport script from \"./admin-create.vue?vue&type=script&lang=js&\"\nexport * from \"./admin-create.vue?vue&type=script&lang=js&\"\nimport style0 from \"./admin-create.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}