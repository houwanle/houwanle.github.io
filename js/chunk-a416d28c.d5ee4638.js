(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a416d28c"],{"2bb5":function(e,t,i){"use strict";t.__esModule=!0;i("8122");t.default={mounted:function(){},methods:{getMigratingConfig:function(){return{props:{},events:{}}}}}},"5de1":function(e,t,i){"use strict";var a=i("8a09"),s=i.n(a);s.a},"5fc6":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{width:"100%",height:"38px",background:"rgba(13,67,111,1)","box-shadow":"0px 2px 10px 0px rgba(0, 0, 0, 0.05)","font-size":"14px","font-family":"Microsoft YaHei","font-weight":"400",color:"rgba(255,255,255,1)","padding-left":"24px","line-height":"38px"}},[e._v(" 文件管理 ")]),i("Card",{staticStyle:{margin:"10px"}},[i("Row",[i("Col",{staticStyle:{display:"flex","justify-content":"flex-start"}},[i("div",{staticStyle:{"margin-left":"40px"}},[i("span",{staticStyle:{color:"#fff"}},[e._v("文件名称：")]),i("Input",{style:{width:180*e.base+"px",height:"32px","border-radius":"2px"},attrs:{placeholder:"请输入"},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}})],1),i("div",{staticStyle:{"margin-left":"30px"}},[i("span",{staticStyle:{color:"#fff"}},[e._v("类别：")]),i("Select",{style:{width:200*e.base+"px"},attrs:{clearable:""},model:{value:e.fileType,callback:function(t){e.fileType=t},expression:"fileType"}},e._l(e.fileList,(function(t){return i("Option",{key:t.metaDataValue,attrs:{value:t.metaDataValue}},[e._v(e._s(t.metaDataName))])})),1)],1),i("div",[i("span",{staticStyle:{margin:"0 30px"}},[i("Button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)])])],1)],1),i("Card",{staticStyle:{margin:"10px"}},[i("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[i("Button",{staticStyle:{background:"rgba(13,67,111,1)",color:"rgba(199,219,244,1)"},attrs:{disabled:e.isGray},on:{click:e.uploadFile}},[e._v("上传文件")])],1),i("div",{staticStyle:{"margin-top":"10px"}},[i("Table",{attrs:{columns:e.columns1,data:e.fileData,loading:e.loadingStatus,height:e.tabHeight,id:"fileTable"}}),i("Page",{staticStyle:{"text-align":"right",margin:"20px 0"},attrs:{total:e.totalCount,current:e.pageNo,"show-total":"","show-elevator":"","show-sizer":"",placement:"top"},on:{"on-change":e.pageChange,"on-page-size-change":e.sizeChange}})],1)]),i("Modal",{attrs:{"class-name":"vertical-center-modal",closable:!0,"mask-closable":!1,id:"uploadModal"},model:{value:e.uploadModal,callback:function(t){e.uploadModal=t},expression:"uploadModal"}},[i("p",{staticStyle:{color:"#484f5f","padding-left":"5px",display:"flex","justify-content":"space-between","align-items":"center"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("上传文件")])]),i("div",[i("Row",[i("Col",{attrs:{span:"24"}},[i("Form",{attrs:{"label-position":"left","label-width":90}},[i("FormItem",{attrs:{label:"上传文件："}},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"before-upload":e.beforeUpload,drag:"",action:"https://jsonplaceholder.typicode.com/posts/"}},[i("i",{staticClass:"el-icon-upload",attrs:{id:"uploadIco"}}),i("div",{staticClass:"el-upload__text",staticStyle:{color:"#fff"}},[e._v("将文件拖到此处，或 "),i("em",[e._v("点击上传")])])]),i("div",[i("div",{staticStyle:{width:"91%",display:"flex","justify-content":"space-between"}},[i("Tooltip",{attrs:{placement:"top-start"}},[i("p",{staticStyle:{width:"200px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",color:"#fff"}},[e._v(e._s(e.uploadFileData?e.uploadFileData.name:""))]),i("div",{attrs:{slot:"content"},slot:"content"},[i("p",{staticStyle:{"white-space":"normal","word-wrap":"break-word"}},[e._v(" "+e._s(e.uploadFileData?e.uploadFileData.name:"")+" ")])])]),i("p",{directives:[{name:"show",rawName:"v-show",value:e.errorProgress,expression:"errorProgress"}],staticStyle:{color:"#f56c6c"}},[e._v("上传失败")])],1),e.successProgress?i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("el-progress",{staticStyle:{width:"88%",color:"#fff"},attrs:{percentage:e.processNum,"stroke-width":1,id:"progress"}}),i("Button",{directives:[{name:"show",rawName:"v-show",value:100!==e.processNum,expression:"processNum!==100"}],staticStyle:{color:"rgb(2, 232, 255)"},attrs:{type:"text",size:"small",id:"cancelUpload"},on:{click:e.cancelUpload}},[e._v("取消")])],1):e._e()]),e.errorProgress?i("div",[i("el-progress",{attrs:{percentage:e.processNum,"stroke-width":1,status:"exception"}})],1):e._e()],1),i("FormItem",[i("div",{staticStyle:{"line-height":"21px",color:"#fff"}},[i("p",{staticStyle:{marginBottom:"5px"}},[e._v("文件的命名规范如下：")]),i("span",[e._v("1.使用 UTF-8 编码；")]),i("br"),i("span",[e._v("2.区分大小写；")]),i("br"),i("span",[e._v("3.长度必须在 1-100 字节之间；")]),i("br"),i("span",[e._v(" 4.不能以 "),i("span",{staticStyle:{color:"red"}},[e._v("/")]),e._v(" 或者 "),i("span",{staticStyle:{color:"red"}},[e._v("\\")]),e._v("字符开头。 ")])])])],1)],1)],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"}),e.spinShow?i("Spin",{attrs:{size:"large",fix:""}},[e._v("上传中...")]):e._e()],1),i("Modal",{attrs:{title:"视频播放","mask-closable":!1,closable:!1},model:{value:e.videoModal,callback:function(t){e.videoModal=t},expression:"videoModal"}},[i("div",{attrs:{id:"file_Player"}},[i("suma-player",{ref:"videoPlayer",on:{plyerEnd:e.plyerEnd}})],1),i("p",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticStyle:{background:"rgba(13,67,111,1)",color:"rgba(199,219,244,1)"},on:{click:e.playCancel}},[e._v("关闭")])],1)]),i("Modal",{model:{value:e.videoChildModal,callback:function(t){e.videoChildModal=t},expression:"videoChildModal"}},[i("p",{attrs:{slot:"header"},slot:"header"},[e._v(" 下载列表 ")]),i("Table",{ref:"currentRowTable",attrs:{"highlight-row":"",columns:e.videoColumns,data:e.videoData}}),i("p",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticStyle:{background:"rgba(13,67,111,1)",color:"rgba(199,219,244,1)"},on:{click:e.downloadShut}},[e._v("关闭")])],1)],1),i("player",{ref:"player",on:{isBaseCreate:e.videoCreateSuccess,isEnd:e.playEnding}})],1)},s=[],o=(i("4160"),i("fb6a"),i("b0c0"),i("159b"),i("b85c")),n=(i("6b30"),i("450d"),i("c284")),r=i.n(n),l=(i("f225"),i("89a9")),c=i.n(l),u=i("4ec3"),d=i("2b0e"),p=i("a78e"),f=i.n(p),h=i("bc3a"),g=i.n(h),y=i("f9cb"),v=i("eb83");d["default"].use(c.a),d["default"].use(r.a);var m={components:{"suma-player":y["a"],player:v["default"]},data:function(){return{videoChildModal:!1,videoModal:!1,successProgress:!1,uploadModal:!1,spinShow:!1,errorProgress:!1,loadingStatus:!1,fileType:1e4,fileName:"",fileList:[],columns1:[{title:"文件名称",key:"fileName",minWidth:160},{title:"通道",key:"channelName",minWidth:120},{title:"类别",key:"type",minWidth:120},{title:"文件格式",key:"fileFormat",minWidth:100},{title:"状态",key:"status",minWidth:160,maxWidth:180},{title:"文件大小",key:"fileSize",minWidth:120},{title:"创建时间",key:"createAt",minWidth:170},{title:"操作",key:"handle",align:"center",fixed:"right",minWidth:160}],playIndex:0,uploadFileData:null,shardList:[],fileIndex:1,processNum:0,fileId:"",isUploadFlag:!1,videoColumns:[{title:"文件名",key:"fileName"},{title:"操作",key:"handle"}],videoData:[{fileName:"文件"}],fileData:[],pageNo:1,pageSize:10,totalCount:0,isGray:!1,videoIndex:0,videoGroupIndex:0,timer:null,base:1,tabHeight:0}},created:function(){var e=this;this.isGray=1!=JSON.parse(localStorage.getItem("loginRes")).user.operationPermissions,this.fileList=JSON.parse(localStorage.getItem("selectAllData"))[1].metaDictList,this.fileList.unshift({metaDataValue:1e4,metaDataName:"全部"}),this.selectUserChannel(),this.init(),this.$bus.$on("isBaseCreate",(function(t){e.videoCreateSuccess(t)}))},mounted:function(){var e=this;this.getDom(),window.onresize=function(){e.getDom();var t=document.getElementById("file_Player"),i=t.offsetWidth,a=t.offsetHeight,s=t.getBoundingClientRect().left,o=t.getBoundingClientRect().top,n=1,r=1,l=e.videoGroupIndex,c={groupIndex:l,x:s,y:o,width:i,height:a,rows:n,columns:r};e.$refs.player.adjustQmlPlayer(c)}},beforeDestroy:function(){clearInterval(this.timer),this.$bus.$off("isBaseCreate")},methods:{getDom:function(){var e=window.innerWidth,t=window.innerHeight;this.base=(e-160)/864,this.tabHeight=t-350},downloadShut:function(){this.videoChildModal=!1},init:function(){var e=this,t=this;this.columns1.forEach((function(i){"handle"===i.key?i.render=function(i,a){return i("p",{style:{display:"flex"}},[i("span",{style:{marginRight:"5px",color:e.isGray?"gray":"#02E8FF",cursor:e.isGray?"not-allowed":"pointer",fontSize:"14px",display:t.showDownLoadBtn(a.row)},on:{click:function(){e.isGray||e.download(a.row)}}},"下载"),i("Poptip",{props:{confirm:!0,title:"您确定要删除这条数据吗？",transfer:!0},on:{"on-ok":function(){t.removeByID(a.row)}}},[i("span",{style:{display:t.showRemoveBtn(a.row),marginRight:"5px",color:"#02E8FF",cursor:"pointer",fontSize:"14px"}},"删除")]),i("span",{style:{display:t.showRemoveBtn1(a.row),marginRight:"5px",color:"gray",cursor:"not-allowed",fontSize:"14px"}},"删除"),i("span",{style:{marginRight:"5px",color:"#02E8FF",cursor:"pointer",fontSize:"14px",display:t.showPlayBtn(a.row)},on:{click:function(){e.playVideo(a.row)}}},"播放")])}:"status"===i.key?i.render=function(e,i){return e("div",{style:{display:"flex","align-items":"center"}},[e("div",{style:{display:3===i.row.fileState||3!=i.row.fileCategory&&2===i.row.fileState||3!=i.row.fileCategory&&4===i.row.fileState&&3!==i.row.injectStatus?"":"none",width:"8px",height:"8px","margin-right":"3px","border-radius":"50%",background:3===i.row.fileState?"#F56C6C":"#02E8FF"}}),e("span",{style:{color:3===i.row.fileState?"#F56C6C":3!=i.row.fileCategory&&2===i.row.fileState||3!=i.row.fileCategory&&4===i.row.fileState&&3!==i.row.injectStatus?"#02E8FF":"","margin-right":"15px"}},i.row.status),e("i-circle",{props:{percent:4===i.row.fileState?100:i.row.exportRate,size:35,"stroke-color":"#02E8FF"},style:{fontSize:"10px",display:t.showPressCircle(i.row),verticalAlign:"middle",color:"#C8DCF4"}},t.showPercent(i.row))])}:"fileSize"===i.key&&(i.render=function(e,t){return e("span",{},0==t.row.fileSize?"":t.row.fileSize+" MB")})})),this.videoColumns.forEach((function(t){"handle"===t.key&&(t.render=function(t,i){return t("div",[t("span",{style:{color:"#02E8FF",cursor:"pointer"},on:{click:function(){e.downloadOne(i.row)}}},"下载")])})}))},showDownLoadBtn:function(e){return 3===e.fileCategory?4==e.fileState?"block":"none":0==e.fileState||1==e.fileState||2==e.fileState||3==e.fileState?"none":4==e.fileState?3===e.injectStatus?"block":"none":void 0},showRemoveBtn:function(e){return this.isGray?"none":3===e.fileCategory?0==e.fileState?"none":"block":0==e.fileState||2==e.fileState?"none":4==e.fileState?3===e.injectStatus||2===e.injectStatus?"block":"none":void 0},showRemoveBtn1:function(e){return this.isGray?3===e.fileCategory?0==e.fileState?"none":"block":0==e.fileState||2==e.fileState?"none":4==e.fileState?3===e.injectStatus||2===e.injectStatus?"block":"none":void 0:"none"},showPlayBtn:function(e){var t=e.fileFormat.toLowerCase();return"ts"!==t&&"mp4"!==t&&"3gp"!==t&&"flv"!==t&&"avi"!==t&&"mov"!==t&&"rmvb"!==t&&"rm"!==t?"none":3===e.fileCategory?4===e.fileState?"block":"none":4===e.fileState&&3===e.injectStatus?"block":"none"},showPressCircle:function(e){return 3===e.fileCategory?"none":2===e.fileState||4===e.fileState&&3!==e.injectStatus&&2!==e.injectStatus?"block":"none"},showPercent:function(e){return 4===e.fileState?"100%":e.exportRate?e.exportRate+"%":""},search:function(){this.pageNo=1,this.selectUserChannel()},selectUserChannel:function(){var e=this,t={fileName:this.fileName,fileCategory:1e4===this.fileType?"":this.fileType,pageNo:this.pageNo,pageSize:this.pageSize};this.loadingStatus=!0,u["a"].searchAccountFileList(t).then((function(t){if(console.log("文件列表",t),t.result){if(!t.result.length&&e.pageNo>1)return e.pageNo--,e.selectUserChannel(),!1;var i,a=Object(o["a"])(t.result);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.type=0===s.fileCategory?"视频+音频":1===s.fileCategory?"纯视频":2===s.fileCategory?"纯音频":"文件上传",3===s.fileCategory?0===s.fileState?s.status="正在上传":1===s.fileState?s.status="注入中":3===s.fileState?s.status="生成失败":4===s.fileState&&(s.status="已完成"):0===s.fileState?s.status="正在上传":1===s.fileState?s.status="注入中":2===s.fileState?s.status="正在导出":3===s.fileState?s.status="生成失败":4===s.fileState&&(3===s.injectStatus?s.status="已完成":2===s.injectStatus?s.status="生成失败":s.status="正在导出")}}catch(c){a.e(c)}finally{a.f()}e.fileData=t.result,e.totalCount=t.count;var n,r=Object(o["a"])(t.result);try{for(r.s();!(n=r.n()).done;){var l=n.value;if("正在导出"===l.status){clearInterval(e.timer),e.timer=setInterval((function(){e.selectUserChannel_1()}),5e3);break}}}catch(c){r.e(c)}finally{r.f()}}e.loadingStatus=!1}),(function(t){e.loadingStatus=!1}))},selectUserChannel_1:function(){var e=this,t={fileName:this.fileName,fileCategory:1e4===this.fileType?"":this.fileType,pageNo:this.pageNo,pageSize:this.pageSize};u["a"].searchAccountFileList(t).then((function(t){if(console.log("文件列表",t),t.result){var i,a=Object(o["a"])(t.result);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.type=0===s.fileCategory?"视频+音频":1===s.fileCategory?"纯视频":2===s.fileCategory?"纯音频":"文件上传",3===s.fileCategory?0===s.fileState?s.status="正在上传":1===s.fileState?s.status="注入中":3===s.fileState?s.status="生成失败":4===s.fileState&&(s.status="已完成"):0===s.fileState?s.status="正在上传":1===s.fileState?s.status="注入中":2===s.fileState?s.status="正在导出":3===s.fileState?s.status="生成失败":4===s.fileState&&(3===s.injectStatus?s.status="已完成":2===s.injectStatus?s.status="生成失败":s.status="正在导出")}}catch(u){a.e(u)}finally{a.f()}e.fileData=t.result,e.totalCount=t.count;var n,r=!0,l=Object(o["a"])(e.fileData);try{for(l.s();!(n=l.n()).done;){var c=n.value;if("正在导出"==c.status){r=!1;break}}}catch(u){l.e(u)}finally{l.f()}r&&clearInterval(e.timer)}}))},removeByID:function(e){var t=this;console.log("文件",e);var i={fileId:e.fileId};u["a"].deleteFile(i).then((function(e){t.$Message.success("文件删除成功"),t.selectUserChannel()}))},download:function(e){if(console.log(e),e.fileNum>1)return this.showVideoChild(e),!1;var t=document.createElement("a");if(t.href=e.downUrl,t.download=e.fileName,t.click(),e.fileName){var i={fileName:e.fileName};u["a"].saveDownloadLog(i).then((function(e){}))}},downloadOne:function(e){var t=document.createElement("a");if(t.href=e.downUrl,t.download=e.fileName,t.click(),e.fileName){var i={fileName:e.fileName};u["a"].saveDownloadLog(i).then((function(e){}))}},showVideoChild:function(e){var t=this;console.log(e),this.videoChildModal=!0;var i={fileId:e.fileId};u["a"].getFileDwonUrlList(i).then((function(e){console.log(e.result),t.videoData=e.result}))},playVideo:function(e){if(this.videoModal=!0,this.playIndex=0,3===e.fileCategory?"ts"===e.fileFormat.toLowerCase()?this.playUrl=e.playUrl:this.playUrl=[e.downUrl]:this.playUrl=e.playUrl,this.$sumaQtPlayer){var t={elementClassName:"",elementId:"",mode:"base"};this.$refs.player.replaceVideoWithPlayer1(t)}else this.$refs.videoPlayer.playVodWithHlsUrl(this.playUrl[this.playIndex],!0)},videoCreateSuccess:function(e){this.videoIndex=e.playerIndex,this.videoGroupIndex=e.groupIndex,this.playIndex=0,this.playInit()},playEnding:function(e){if(e===this.videoGroupIndex){if(this.playIndex===this.playUrl.length-1)return this.$Message.info("播放结束"),!1;this.playIndex++,this.playInit()}},playInit:function(){var e=[{x:200,y:100,playerIndex:this.videoIndex,groupIndex:this.videoGroupIndex,playerInfo:{channelId:"",channelName:"",channelUrl:this.playUrl[this.playIndex]}}];this.$refs.player.prepareQmlPlayer2(e)},plyerEnd:function(){if(this.playIndex===this.playUrl.length-1)return this.$Message.info("播放结束"),!1;this.playIndex++,this.$refs.videoPlayer.playVodWithHlsUrl(this.playUrl[this.playIndex],!0)},playCancel:function(){this.$sumaQtPlayer?(this.videoModal=!1,this.$refs.player.destroyQmlPlayer([{groupIndex:-2,playerIndex:-2}])):(this.videoModal=!1,this.$refs.videoPlayer.pause())},uploadFile:function(){this.uploadModal=!0,this.successProgress=!1,this.errorProgress=!1,this.isUploadFlag=!1,this.processNum=0,this.uploadFileData=null},GetCharLength:function(e){for(var t=0,i=0;i<e.length;i++)e.charCodeAt(i)>255?t+=2:t+=1;return t},beforeUpload:function(e){var t=this.GetCharLength(e.name);return 100<t||t<1?(this.$Message.info("文件名称长度必须在1-100字节之间"),!1):this.isUploadFlag?(this.$Message.info("正在上传中,请稍后"),!1):(this.successProgress=!1,this.errorProgress=!1,this.isUploadFlag=!1,this.processNum=0,this.uploadFileData=e,this.checkFileNameIsExisted(e),!1)},checkFileNameIsExisted:function(e){var t=this,i={fileName:e.name};u["a"].checkFileNameIsExisted(i).then((function(i){if(console.log(i),i.result)t.$Message.info("文件已上传请重新命名");else{t.successProgress=!0,t.shardList=[];var a=e.size,s=104857600;t.shardCount=Math.ceil(a/s);for(var o=1,n=0;n<t.shardCount;++n){var r=n*s,l=Math.min(a,r+s);t.shardList.push(e.slice(r,l))}t.upload(t.shardCount,o,"")}}))},upload:function(e,t,i){var a=this,s={versionName:"4.1.8",versionCode:"340",operatorId:f.a.get("operatorId"),operatorGroup:f.a.get("operatorGroup"),info:{userId:JSON.parse(localStorage["loginRes"]).user.userId,fileName:this.uploadFileData.name,chunkNumber:t,totalChunks:e,fileId:i,fileSize:this.uploadFileData.size}};console.log("文件",this.shardList[t-1]);var o=new FormData;o.append("jsonText",JSON.stringify(s)),o.append("file",this.shardList[t-1]);var n=f.a.get("token"),r=g.a.create({baseURL:"./api/drbs",timeout:12e4,headers:{"Content-type":"multipart/form-data",accessToken:"".concat(n)}});this.isUploadFlag=!0,r.post("/cmc/general/uploadPartMergeFile",o).then((function(e){if(0==e.data.status){if(t===a.shardCount)return a.processNum=parseInt(t/a.shardCount*100),a.selectUserChannel(),a.isUploadFlag=!1,!1;a.processNum=parseInt(t/a.shardCount*100),a.fileId=e.data.data.result,t++,a.upload(a.shardCount,t,a.fileId)}else a.isUploadFlag=!1,a.successProgress=!1,a.errorProgress=!0}),(function(e){a.isUploadFlag=!1,a.successProgress=!1,a.errorProgress=!0}))},cancelUpload:function(){var e=this,t={userId:JSON.parse(localStorage["loginRes"]).user.userId,fileId:this.fileId,fileName:this.uploadFileData.name};u["a"].cancelUploadPartMergeFile(t).then((function(t){e.$Message.info("取消上传"),e.isUploadFlag=!1,e.successProgress=!1,e.processNum=0}))},pageChange:function(e){this.pageNo=e,this.selectUserChannel()},sizeChange:function(e){this.pageSize=e,1===this.pageNo&&this.selectUserChannel()}}},b=m,S=(i("5de1"),i("2877")),w=Object(S["a"])(b,a,s,!1,null,null,null);t["default"]=w.exports},"6b30":function(e,t,i){},"6b7c":function(e,t,i){"use strict";t.__esModule=!0;var a=i("4897");t.default={methods:{t:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return a.t.apply(this,t)}}}},"89a9":function(e,t,i){e.exports=function(e){var t={};function i(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=57)}({0:function(e,t,i){"use strict";function a(e,t,i,a,s,o,n,r){var l,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=i,c._compiled=!0),a&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),n?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},c._ssrRegister=l):s&&(l=r?function(){s.call(this,this.$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}i.d(t,"a",(function(){return a}))},11:function(e,t){e.exports=i("2bb5")},26:function(e,t){e.exports=i("92fa")},42:function(e,t){e.exports=i("c284")},57:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition-group",{class:["el-upload-list","el-upload-list--"+e.listType,{"is-disabled":e.disabled}],attrs:{tag:"ul",name:"el-list"}},e._l(e.files,(function(t){return i("li",{key:t.uid,class:["el-upload-list__item","is-"+t.status,e.focusing?"focusing":""],attrs:{tabindex:"0"},on:{keydown:function(i){if(!("button"in i)&&e._k(i.keyCode,"delete",[8,46],i.key,["Backspace","Delete","Del"]))return null;!e.disabled&&e.$emit("remove",t)},focus:function(t){e.focusing=!0},blur:function(t){e.focusing=!1},click:function(t){e.focusing=!1}}},[e._t("default",["uploading"!==t.status&&["picture-card","picture"].indexOf(e.listType)>-1?i("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:t.url,alt:""}}):e._e(),i("a",{staticClass:"el-upload-list__item-name",on:{click:function(i){e.handleClick(t)}}},[i("i",{staticClass:"el-icon-document"}),e._v(e._s(t.name)+"\n      ")]),i("label",{staticClass:"el-upload-list__item-status-label"},[i("i",{class:{"el-icon-upload-success":!0,"el-icon-circle-check":"text"===e.listType,"el-icon-check":["picture-card","picture"].indexOf(e.listType)>-1}})]),e.disabled?e._e():i("i",{staticClass:"el-icon-close",on:{click:function(i){e.$emit("remove",t)}}}),e.disabled?e._e():i("i",{staticClass:"el-icon-close-tip"},[e._v(e._s(e.t("el.upload.deleteTip")))]),"uploading"===t.status?i("el-progress",{attrs:{type:"picture-card"===e.listType?"circle":"line","stroke-width":"picture-card"===e.listType?6:2,percentage:e.parsePercentage(t.percentage)}}):e._e(),"picture-card"===e.listType?i("span",{staticClass:"el-upload-list__item-actions"},[e.handlePreview&&"picture-card"===e.listType?i("span",{staticClass:"el-upload-list__item-preview",on:{click:function(i){e.handlePreview(t)}}},[i("i",{staticClass:"el-icon-zoom-in"})]):e._e(),e.disabled?e._e():i("span",{staticClass:"el-upload-list__item-delete",on:{click:function(i){e.$emit("remove",t)}}},[i("i",{staticClass:"el-icon-delete"})])]):e._e()],{file:t})],2)})),0)},s=[];a._withStripped=!0;var o=i(6),n=i.n(o),r=i(42),l=i.n(r),c={name:"ElUploadList",mixins:[n.a],data:function(){return{focusing:!1}},components:{ElProgress:l.a},props:{files:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},handlePreview:Function,listType:String},methods:{parsePercentage:function(e){return parseInt(e,10)},handleClick:function(e){this.handlePreview&&this.handlePreview(e)}}},u=c,d=i(0),p=Object(d["a"])(u,a,s,!1,null,null,null);p.options.__file="packages/upload/src/upload-list.vue";var f=p.exports,h=i(26),g=i.n(h);function y(e,t,i){var a=void 0;a=i.response?""+(i.response.error||i.response):i.responseText?""+i.responseText:"fail to post "+e+" "+i.status;var s=new Error(a);return s.status=i.status,s.method="post",s.url=e,s}function v(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(i){return t}}function m(e){if("undefined"!==typeof XMLHttpRequest){var t=new XMLHttpRequest,i=e.action;t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var a=new FormData;e.data&&Object.keys(e.data).forEach((function(t){a.append(t,e.data[t])})),a.append(e.filename,e.file,e.file.name),t.onerror=function(t){e.onError(t)},t.onload=function(){if(t.status<200||t.status>=300)return e.onError(y(i,e,t));e.onSuccess(v(t))},t.open("post",i,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var s=e.headers||{};for(var o in s)s.hasOwnProperty(o)&&null!==s[o]&&t.setRequestHeader(o,s[o]);return t.send(a),t}}var b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-upload-dragger",class:{"is-dragover":e.dragover},on:{drop:function(t){return t.preventDefault(),e.onDrop(t)},dragover:function(t){return t.preventDefault(),e.onDragover(t)},dragleave:function(t){t.preventDefault(),e.dragover=!1}}},[e._t("default")],2)},S=[];b._withStripped=!0;var w={name:"ElUploadDrag",props:{disabled:Boolean},inject:{uploader:{default:""}},data:function(){return{dragover:!1}},methods:{onDragover:function(){this.disabled||(this.dragover=!0)},onDrop:function(e){if(!this.disabled&&this.uploader){var t=this.uploader.accept;this.dragover=!1,t?this.$emit("file",[].slice.call(e.dataTransfer.files).filter((function(e){var i=e.type,a=e.name,s=a.indexOf(".")>-1?"."+a.split(".").pop():"",o=i.replace(/\/.*$/,"");return t.split(",").map((function(e){return e.trim()})).filter((function(e){return e})).some((function(e){return/\..+$/.test(e)?s===e:/\/\*$/.test(e)?o===e.replace(/\/\*$/,""):!!/^[^\/]+\/[^\/]+$/.test(e)&&i===e}))}))):this.$emit("file",e.dataTransfer.files)}}}},x=w,C=Object(d["a"])(x,b,S,!1,null,null,null);C.options.__file="packages/upload/src/upload-dragger.vue";var _,k,F=C.exports,P={inject:["uploader"],components:{UploadDragger:F},props:{type:String,action:{type:String,required:!0},name:{type:String,default:"file"},data:Object,headers:Object,withCredentials:Boolean,multiple:Boolean,accept:String,onStart:Function,onProgress:Function,onSuccess:Function,onError:Function,beforeUpload:Function,drag:Boolean,onPreview:{type:Function,default:function(){}},onRemove:{type:Function,default:function(){}},fileList:Array,autoUpload:Boolean,listType:String,httpRequest:{type:Function,default:m},disabled:Boolean,limit:Number,onExceed:Function},data:function(){return{mouseover:!1,reqs:{}}},methods:{isImage:function(e){return-1!==e.indexOf("image")},handleChange:function(e){var t=e.target.files;t&&this.uploadFiles(t)},uploadFiles:function(e){var t=this;if(this.limit&&this.fileList.length+e.length>this.limit)this.onExceed&&this.onExceed(e,this.fileList);else{var i=Array.prototype.slice.call(e);this.multiple||(i=i.slice(0,1)),0!==i.length&&i.forEach((function(e){t.onStart(e),t.autoUpload&&t.upload(e)}))}},upload:function(e){var t=this;if(this.$refs.input.value=null,!this.beforeUpload)return this.post(e);var i=this.beforeUpload(e);i&&i.then?i.then((function(i){var a=Object.prototype.toString.call(i);if("[object File]"===a||"[object Blob]"===a){for(var s in"[object Blob]"===a&&(i=new File([i],e.name,{type:e.type})),e)e.hasOwnProperty(s)&&(i[s]=e[s]);t.post(i)}else t.post(e)}),(function(){t.onRemove(null,e)})):!1!==i?this.post(e):this.onRemove(null,e)},abort:function(e){var t=this.reqs;if(e){var i=e;e.uid&&(i=e.uid),t[i]&&t[i].abort()}else Object.keys(t).forEach((function(e){t[e]&&t[e].abort(),delete t[e]}))},post:function(e){var t=this,i=e.uid,a={headers:this.headers,withCredentials:this.withCredentials,file:e,data:this.data,filename:this.name,action:this.action,onProgress:function(i){t.onProgress(i,e)},onSuccess:function(a){t.onSuccess(a,e),delete t.reqs[i]},onError:function(a){t.onError(a,e),delete t.reqs[i]}},s=this.httpRequest(a);this.reqs[i]=s,s&&s.then&&s.then(a.onSuccess,a.onError)},handleClick:function(){this.disabled||(this.$refs.input.value=null,this.$refs.input.click())},handleKeydown:function(e){e.target===e.currentTarget&&(13!==e.keyCode&&32!==e.keyCode||this.handleClick())}},render:function(e){var t=this.handleClick,i=this.drag,a=this.name,s=this.handleChange,o=this.multiple,n=this.accept,r=this.listType,l=this.uploadFiles,c=this.disabled,u=this.handleKeydown,d={class:{"el-upload":!0},on:{click:t,keydown:u}};return d.class["el-upload--"+r]=!0,e("div",g()([d,{attrs:{tabindex:"0"}}]),[i?e("upload-dragger",{attrs:{disabled:c},on:{file:l}},[this.$slots.default]):this.$slots.default,e("input",{class:"el-upload__input",attrs:{type:"file",name:a,multiple:o,accept:n},ref:"input",on:{change:s}})])}},I=P,N=Object(d["a"])(I,_,k,!1,null,null,null);N.options.__file="packages/upload/src/upload.vue";var U=N.exports,E=i(11),j=i.n(E);function D(){}var T,O,$={name:"ElUpload",mixins:[j.a],components:{ElProgress:l.a,UploadList:f,Upload:U},provide:function(){return{uploader:this}},inject:{elForm:{default:""}},props:{action:{type:String,required:!0},headers:{type:Object,default:function(){return{}}},data:Object,multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,dragger:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:String,type:{type:String,default:"select"},beforeUpload:Function,beforeRemove:Function,onRemove:{type:Function,default:D},onChange:{type:Function,default:D},onPreview:{type:Function},onSuccess:{type:Function,default:D},onProgress:{type:Function,default:D},onError:{type:Function,default:D},fileList:{type:Array,default:function(){return[]}},autoUpload:{type:Boolean,default:!0},listType:{type:String,default:"text"},httpRequest:Function,disabled:Boolean,limit:Number,onExceed:{type:Function,default:D}},data:function(){return{uploadFiles:[],dragOver:!1,draging:!1,tempIndex:1}},computed:{uploadDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{listType:function(e){"picture-card"!==e&&"picture"!==e||(this.uploadFiles=this.uploadFiles.map((function(e){if(!e.url&&e.raw)try{e.url=URL.createObjectURL(e.raw)}catch(t){console.error("[Element Error][Upload]",t)}return e})))},fileList:{immediate:!0,handler:function(e){var t=this;this.uploadFiles=e.map((function(e){return e.uid=e.uid||Date.now()+t.tempIndex++,e.status=e.status||"success",e}))}}},methods:{handleStart:function(e){e.uid=Date.now()+this.tempIndex++;var t={status:"ready",name:e.name,size:e.size,percentage:0,uid:e.uid,raw:e};if("picture-card"===this.listType||"picture"===this.listType)try{t.url=URL.createObjectURL(e)}catch(i){return void console.error("[Element Error][Upload]",i)}this.uploadFiles.push(t),this.onChange(t,this.uploadFiles)},handleProgress:function(e,t){var i=this.getFile(t);this.onProgress(e,i,this.uploadFiles),i.status="uploading",i.percentage=e.percent||0},handleSuccess:function(e,t){var i=this.getFile(t);i&&(i.status="success",i.response=e,this.onSuccess(e,i,this.uploadFiles),this.onChange(i,this.uploadFiles))},handleError:function(e,t){var i=this.getFile(t),a=this.uploadFiles;i.status="fail",a.splice(a.indexOf(i),1),this.onError(e,i,this.uploadFiles),this.onChange(i,this.uploadFiles)},handleRemove:function(e,t){var i=this;t&&(e=this.getFile(t));var a=function(){i.abort(e);var t=i.uploadFiles;t.splice(t.indexOf(e),1),i.onRemove(e,t)};if(this.beforeRemove){if("function"===typeof this.beforeRemove){var s=this.beforeRemove(e,this.uploadFiles);s&&s.then?s.then((function(){a()}),D):!1!==s&&a()}}else a()},getFile:function(e){var t=this.uploadFiles,i=void 0;return t.every((function(t){return i=e.uid===t.uid?t:null,!i})),i},abort:function(e){this.$refs["upload-inner"].abort(e)},clearFiles:function(){this.uploadFiles=[]},submit:function(){var e=this;this.uploadFiles.filter((function(e){return"ready"===e.status})).forEach((function(t){e.$refs["upload-inner"].upload(t.raw)}))},getMigratingConfig:function(){return{props:{"default-file-list":"default-file-list is renamed to file-list.","show-upload-list":"show-upload-list is renamed to show-file-list.","thumbnail-mode":"thumbnail-mode has been deprecated, you can implement the same effect according to this case: http://element.eleme.io/#/zh-CN/component/upload#yong-hu-tou-xiang-shang-chuan"}}}},beforeDestroy:function(){this.uploadFiles.forEach((function(e){e.url&&0===e.url.indexOf("blob:")&&URL.revokeObjectURL(e.url)}))},render:function(e){var t=this,i=void 0;this.showFileList&&(i=e(f,{attrs:{disabled:this.uploadDisabled,listType:this.listType,files:this.uploadFiles,handlePreview:this.onPreview},on:{remove:this.handleRemove}},[function(e){if(t.$scopedSlots.file)return t.$scopedSlots.file({file:e.file})}]));var a={props:{type:this.type,drag:this.drag,action:this.action,multiple:this.multiple,"before-upload":this.beforeUpload,"with-credentials":this.withCredentials,headers:this.headers,name:this.name,data:this.data,accept:this.accept,fileList:this.uploadFiles,autoUpload:this.autoUpload,listType:this.listType,disabled:this.uploadDisabled,limit:this.limit,"on-exceed":this.onExceed,"on-start":this.handleStart,"on-progress":this.handleProgress,"on-success":this.handleSuccess,"on-error":this.handleError,"on-preview":this.onPreview,"on-remove":this.handleRemove,"http-request":this.httpRequest},ref:"upload-inner"},s=this.$slots.trigger||this.$slots.default,o=e("upload",a,[s]);return e("div",["picture-card"===this.listType?i:"",this.$slots.trigger?[o,this.$slots.default]:o,this.$slots.tip,"picture-card"!==this.listType?i:""])}},R=$,M=Object(d["a"])(R,T,O,!1,null,null,null);M.options.__file="packages/upload/src/index.vue";var L=M.exports;L.install=function(e){e.component(L.name,L)};t["default"]=L},6:function(e,t){e.exports=i("6b7c")}})},"8a09":function(e,t,i){},"92fa":function(e,t){var i=/^(attrs|props|on|nativeOn|class|style|hook)$/;function a(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}}e.exports=function(e){return e.reduce((function(e,t){var s,o,n,r,l;for(n in t)if(s=e[n],o=t[n],s&&i.test(n))if("class"===n&&("string"===typeof s&&(l=s,e[n]=s={},s[l]=!0),"string"===typeof o&&(l=o,t[n]=o={},o[l]=!0)),"on"===n||"nativeOn"===n||"hook"===n)for(r in o)s[r]=a(s[r],o[r]);else if(Array.isArray(s))e[n]=s.concat(o);else if(Array.isArray(o))e[n]=[s].concat(o);else for(r in o)s[r]=o[r];else e[n]=t[n];return e}),{})}},c284:function(e,t,i){e.exports=function(e){var t={};function i(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=119)}({0:function(e,t,i){"use strict";function a(e,t,i,a,s,o,n,r){var l,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=i,c._compiled=!0),a&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),n?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},c._ssrRegister=l):s&&(l=r?function(){s.call(this,this.$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}i.d(t,"a",(function(){return a}))},119:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-progress",class:["el-progress--"+e.type,e.status?"is-"+e.status:"",{"el-progress--without-text":!e.showText,"el-progress--text-inside":e.textInside}],attrs:{role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"}},["line"===e.type?i("div",{staticClass:"el-progress-bar"},[i("div",{staticClass:"el-progress-bar__outer",style:{height:e.strokeWidth+"px"}},[i("div",{staticClass:"el-progress-bar__inner",style:e.barStyle},[e.showText&&e.textInside?i("div",{staticClass:"el-progress-bar__innerText"},[e._v(e._s(e.content))]):e._e()])])]):i("div",{staticClass:"el-progress-circle",style:{height:e.width+"px",width:e.width+"px"}},[i("svg",{attrs:{viewBox:"0 0 100 100"}},[i("path",{staticClass:"el-progress-circle__track",style:e.trailPathStyle,attrs:{d:e.trackPath,stroke:"#e5e9f2","stroke-width":e.relativeStrokeWidth,fill:"none"}}),i("path",{staticClass:"el-progress-circle__path",style:e.circlePathStyle,attrs:{d:e.trackPath,stroke:e.stroke,fill:"none","stroke-linecap":e.strokeLinecap,"stroke-width":e.percentage?e.relativeStrokeWidth:0}})])]),e.showText&&!e.textInside?i("div",{staticClass:"el-progress__text",style:{fontSize:e.progressTextSize+"px"}},[e.status?i("i",{class:e.iconClass}):[e._v(e._s(e.content))]],2):e._e()])},s=[];a._withStripped=!0;var o={name:"ElProgress",props:{type:{type:String,default:"line",validator:function(e){return["line","circle","dashboard"].indexOf(e)>-1}},percentage:{type:Number,default:0,required:!0,validator:function(e){return e>=0&&e<=100}},status:{type:String,validator:function(e){return["success","exception","warning"].indexOf(e)>-1}},strokeWidth:{type:Number,default:6},strokeLinecap:{type:String,default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:[String,Array,Function],default:""},format:Function},computed:{barStyle:function(){var e={};return e.width=this.percentage+"%",e.backgroundColor=this.getCurrentColor(this.percentage),e},relativeStrokeWidth:function(){return(this.strokeWidth/this.width*100).toFixed(1)},radius:function(){return"circle"===this.type||"dashboard"===this.type?parseInt(50-parseFloat(this.relativeStrokeWidth)/2,10):0},trackPath:function(){var e=this.radius,t="dashboard"===this.type;return"\n        M 50 50\n        m 0 "+(t?"":"-")+e+"\n        a "+e+" "+e+" 0 1 1 0 "+(t?"-":"")+2*e+"\n        a "+e+" "+e+" 0 1 1 0 "+(t?"":"-")+2*e+"\n        "},perimeter:function(){return 2*Math.PI*this.radius},rate:function(){return"dashboard"===this.type?.75:1},strokeDashoffset:function(){var e=-1*this.perimeter*(1-this.rate)/2;return e+"px"},trailPathStyle:function(){return{strokeDasharray:this.perimeter*this.rate+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset}},circlePathStyle:function(){return{strokeDasharray:this.perimeter*this.rate*(this.percentage/100)+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"}},stroke:function(){var e=void 0;if(this.color)e=this.getCurrentColor(this.percentage);else switch(this.status){case"success":e="#13ce66";break;case"exception":e="#ff4949";break;case"warning":e="#e6a23c";break;default:e="#20a0ff"}return e},iconClass:function(){return"warning"===this.status?"el-icon-warning":"line"===this.type?"success"===this.status?"el-icon-circle-check":"el-icon-circle-close":"success"===this.status?"el-icon-check":"el-icon-close"},progressTextSize:function(){return"line"===this.type?12+.4*this.strokeWidth:.111111*this.width+2},content:function(){return"function"===typeof this.format?this.format(this.percentage)||"":this.percentage+"%"}},methods:{getCurrentColor:function(e){return"function"===typeof this.color?this.color(e):"string"===typeof this.color?this.color:this.getLevelColor(e)},getLevelColor:function(e){for(var t=this.getColorArray().sort((function(e,t){return e.percentage-t.percentage})),i=0;i<t.length;i++)if(t[i].percentage>e)return t[i].color;return t[t.length-1].color},getColorArray:function(){var e=this.color,t=100/e.length;return e.map((function(e,i){return"string"===typeof e?{color:e,progress:(i+1)*t}:e}))}}},n=o,r=i(0),l=Object(r["a"])(n,a,s,!1,null,null,null);l.options.__file="packages/progress/src/progress.vue";var c=l.exports;c.install=function(e){e.component(c.name,c)};t["default"]=c}})},f225:function(e,t,i){}}]);
//# sourceMappingURL=chunk-a416d28c.d5ee4638.js.map